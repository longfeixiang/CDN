(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26456,e=>{"use strict";let t;var a=e.i(85069),r=e.i(66634),n=e.i(81756),i=e.i(35449),o=e.i(23714),l=e.i(50812),s=e.i(25923),d=e.i(14136),u=e.i(66821),c=e.i(32131),f=e.i(20128),m=e.i(77482);let p=(0,f.create)((t,a)=>({article:null,isLoading:!1,error:null,hasAiHistory:!1,insights:[],expectation:"",fetchArticle:async e=>{t({isLoading:!0,error:null});try{let a=await (0,m.getArticleKeyAction)(e);a?t({article:a,isLoading:!1}):t({error:"Article not found",isLoading:!1})}catch(e){console.error("Failed to fetch article:",e),t({error:"Failed to load article",isLoading:!1})}},clearArticle:()=>t({article:null,error:null,hasAiHistory:!1,insights:[],expectation:""}),setHasAiHistory:e=>t({hasAiHistory:e}),setInsights:e=>t({insights:e}),setExpectation:e=>t({expectation:e}),toggleFavorite:async()=>{let{article:r}=a();if(!r)return;let n=1===r.favorite;t({article:{...r,favorite:+!n}});try{let{toggleFavoriteAction:a}=await e.A(76150);(await a(r.id,n)).success||t({article:{...r,favorite:+!!n}})}catch(e){console.error("Failed to toggle favorite:",e),t({article:{...r,favorite:+!!n}})}}}));var g=e.i(31924),h=e.i(71111);let v=(0,h.createServerReference)("401ec32b11aa41f55563d51ef92f8d52e0fce195d5",h.callServer,void 0,h.findSourceMapURL,"deleteAiChatAction");var w=e.i(6891),x=e.i(55146),b=e.i(56005);function y(){let e=(0,i.useRouter)(),t=(0,w.useTranslation)(),{article:r,toggleFavorite:n,hasAiHistory:f,setHasAiHistory:m,insights:h,expectation:y}=p(),{toast:j}=(0,b.useToast)(),k=r?.favorite===1,N=async()=>{if(!r)return;let e=`ã€${r.title}ã€‘

`;e+=`${r.content.substring(0,300)}...

`,y&&(e+=`ðŸ’¡ æˆ‘çš„é˜…è¯»æœŸæœ›ï¼š
${y}

`),h&&h.length>0&&(e+=`ðŸ¤– AI æ´žå¯Ÿå»ºè®®ï¼š
`,h.forEach((t,a)=>{e+=`${a+1}. ${t.title}
   ${t.content}

`})),e+=`--- 
æ¥è‡ª B-Zhihu AI é˜…è¯»åŠ©æ‰‹`;try{await navigator.clipboard.writeText(e),j({title:"åˆ†äº«å†…å®¹å·²å¤åˆ¶",description:"åŒ…å«æ–‡ç« æ‘˜è¦ã€AI æ´žå¯ŸåŠæ‚¨çš„é˜…è¯»æœŸæœ›ã€‚",duration:3e3})}catch(e){console.error("Failed to copy:",e),j({variant:"destructive",title:"å¤åˆ¶å¤±è´¥",description:"è¯·é‡è¯•æˆ–æ£€æŸ¥æµè§ˆå™¨æƒé™ã€‚"})}},C=async()=>{r?.uuid&&confirm(t.article.deleteAiChatConfirm)&&((await v(r.uuid)).success?m(!1):alert("Failed to delete chat history"))},T=async()=>{r?.uuid&&confirm(t.article.deleteConfirm)&&((await (0,c.deleteArticleAction)(r.uuid)).success?e.push("/"):alert("Failed to delete article"))};return(0,a.jsx)("header",{className:"sticky top-0 z-50 bg-white/95 dark:bg-[#0a0a0a]/95 backdrop-blur-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"flex items-center justify-center w-10 h-10 rounded-full text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:(0,a.jsx)(o.ChevronLeft,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>n(),className:(0,g.cn)("flex items-center justify-center w-10 h-10 rounded-full transition-colors",k?"text-red-500 bg-red-50 dark:bg-red-900/10 hover:bg-red-100 dark:hover:bg-red-900/20":"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/5"),children:(0,a.jsx)(s.Heart,{className:(0,g.cn)("w-6 h-6",k&&"fill-current")})}),(0,a.jsxs)(x.DropdownMenu,{children:[(0,a.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)("button",{className:"flex items-center justify-center w-10 h-10 rounded-full text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors focus:outline-none",children:(0,a.jsx)(u.MoreHorizontal,{className:"w-6 h-6"})})}),(0,a.jsxs)(x.DropdownMenuContent,{align:"end",className:"w-64",children:[(0,a.jsxs)(x.DropdownMenuItem,{onClick:N,className:"cursor-pointer gap-2",children:[(0,a.jsx)(l.Share2,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.article.share})]}),(0,a.jsx)(x.DropdownMenuSeparator,{}),(0,a.jsxs)(x.DropdownMenuItem,{onClick:T,className:"text-red-500 focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-900/10 cursor-pointer gap-2",children:[(0,a.jsx)(d.Trash2,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.article.delete})]}),f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.DropdownMenuSeparator,{}),(0,a.jsxs)(x.DropdownMenuItem,{onClick:C,className:"text-red-500 focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-900/10 cursor-pointer gap-2",children:[(0,a.jsx)(d.Trash2,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.article.deleteAiChat})]})]})]})]})]})]})})}var j=e.i(44095);let k=(0,e.i(94237).cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function N({className:e,variant:t,asChild:r=!1,...n}){let i=r?j.Slot:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:(0,g.cn)(k({variant:t}),e),...n})}var C=e.i(611),T=e.i(98631);let R=(0,T.default)("image-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);var E=e.i(28781),M=e.i(12480);let $=r.default.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),D=()=>{let e=r.default.useContext($);if(!e)throw Error("useDrawerContext must be used within a Drawer.Root");return e};function S(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function A(){return P(/^iPhone/)||P(/^iPad/)||P(/^Mac/)&&navigator.maxTouchPoints>1}function P(e){return"u">typeof window&&null!=window.navigator?e.test(window.navigator.platform):void 0}!function(e){if(!e||"u"<typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}("[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(\n[data-state=closed]\n){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}");let F="u">typeof window?r.useLayoutEffect:r.useEffect;function O(...e){return(...t)=>{for(let a of e)"function"==typeof a&&a(...t)}}let L="u">typeof document&&window.visualViewport;function I(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function H(e){for(I(e)&&(e=e.parentElement);e&&!I(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}let z=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]),B=0;function W(e,t,a,r){return e.addEventListener(t,a,r),()=>{e.removeEventListener(t,a,r)}}function q(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let t=H(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let a=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top;e.getBoundingClientRect().bottom>t.getBoundingClientRect().bottom+24&&(t.scrollTop+=r-a)}e=t.parentElement}}function U(e){return e instanceof HTMLInputElement&&!z.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Y(...e){return r.useCallback(function(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}(...e),e)}let V=new WeakMap;function X(e,t,a=!1){if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(([t,a])=>{t.startsWith("--")?e.style.setProperty(t,a):(r[t]=e.style[t],e.style[t]=a)}),a||V.set(e,r)}let K=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function G(e,t){if(!e)return null;let a=window.getComputedStyle(e),r=a.transform||a.webkitTransform||a.mozTransform,n=r.match(/^matrix3d\((.+)\)$/);return n?parseFloat(n[1].split(", ")[K(t)?13:12]):(n=r.match(/^matrix\((.+)\)$/))?parseFloat(n[1].split(", ")[K(t)?5:4]):null}function Z(e,t){if(!e)return()=>{};let a=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=a}}let J=[.32,.72,0,1],Q="vaul-dragging";function _(e){let t=r.default.useRef(e);return r.default.useEffect(()=>{t.current=e}),r.default.useMemo(()=>(...e)=>null==t.current?void 0:t.current.call(t,...e),[])}function ee({prop:e,defaultProp:t,onChange:a=()=>{}}){let[n,i]=function({defaultProp:e,onChange:t}){let a=r.default.useState(e),[n]=a,i=r.default.useRef(n),o=_(t);return r.default.useEffect(()=>{i.current!==n&&(o(n),i.current=n)},[n,i,o]),a}({defaultProp:t,onChange:a}),o=void 0!==e,l=o?e:n,s=_(a);return[l,r.default.useCallback(t=>{if(o){let a="function"==typeof t?t(e):t;a!==e&&s(a)}else i(t)},[o,e,i,s])]}let et=()=>()=>{},ea=null;function er({open:e,onOpenChange:a,children:n,onDrag:i,onRelease:o,snapPoints:l,shouldScaleBackground:s=!1,setBackgroundColorOnScale:d=!0,closeThreshold:u=.25,scrollLockTimeout:c=100,dismissible:f=!0,handleOnly:m=!1,fadeFromIndex:p=l&&l.length-1,activeSnapPoint:g,setActiveSnapPoint:h,fixed:v,modal:w=!0,onClose:x,nested:b,noBodyStyles:y=!1,direction:j="bottom",defaultOpen:k=!1,disablePreventScroll:N=!0,snapToSequentialPoint:C=!1,preventScrollRestoration:T=!1,repositionInputs:R=!0,onAnimationEnd:E,container:D,autoFocus:P=!1}){var I,z;let[Y=!1,Z]=ee({defaultProp:k,prop:e,onChange:e=>{null==a||a(e),e||b||eD(),setTimeout(()=>{null==E||E(e)},500),e&&!w&&"u">typeof window&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),e||(document.body.style.pointerEvents="auto")}}),[_,et]=r.default.useState(!1),[er,en]=r.default.useState(!1),[ei,eo]=r.default.useState(!1),el=r.default.useRef(null),es=r.default.useRef(null),ed=r.default.useRef(null),eu=r.default.useRef(null),ec=r.default.useRef(null),ef=r.default.useRef(!1),em=r.default.useRef(null),ep=r.default.useRef(0),eg=r.default.useRef(!1),eh=r.default.useRef(!k),ev=r.default.useRef(0),ew=r.default.useRef(null),ex=r.default.useRef((null==(I=ew.current)?void 0:I.getBoundingClientRect().height)||0),eb=r.default.useRef((null==(z=ew.current)?void 0:z.getBoundingClientRect().width)||0),ey=r.default.useRef(0),ej=r.default.useCallback(e=>{l&&e===eR.length-1&&(es.current=new Date)},[]),{activeSnapPoint:ek,activeSnapPointIndex:eN,setActiveSnapPoint:eC,onRelease:eT,snapPointsOffset:eR,onDrag:eE,shouldFade:eM,getPercentageDragged:e$}=function({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:a,drawerRef:n,overlayRef:i,fadeFromIndex:o,onSnapPointChange:l,direction:s="bottom",container:d,snapToSequentialPoint:u}){let[c,f]=ee({prop:e,defaultProp:null==a?void 0:a[0],onChange:t}),[m,p]=r.default.useState("u">typeof window?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);r.default.useEffect(()=>{function e(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let g=r.default.useMemo(()=>c===(null==a?void 0:a[a.length-1])||null,[a,c]),h=r.default.useMemo(()=>{var e;return null!=(e=null==a?void 0:a.findIndex(e=>e===c))?e:null},[a,c]),v=a&&a.length>0&&(o||0===o)&&!Number.isNaN(o)&&a[o]===c||!a,w=r.default.useMemo(()=>{var e;let t=d?{width:d.getBoundingClientRect().width,height:d.getBoundingClientRect().height}:"u">typeof window?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};return null!=(e=null==a?void 0:a.map(e=>{let a="string"==typeof e,r=0;if(a&&(r=parseInt(e,10)),K(s)){let n=a?r:m?e*t.height:0;return m?"bottom"===s?t.height-n:-t.height+n:n}let n=a?r:m?e*t.width:0;return m?"right"===s?t.width-n:-t.width+n:n}))?e:[]},[a,m,d]),x=r.default.useMemo(()=>null!==h?null==w?void 0:w[h]:null,[w,h]),b=r.default.useCallback(e=>{var t;let r=null!=(t=null==w?void 0:w.findIndex(t=>t===e))?t:null;l(r),X(n.current,{transition:`transform 0.5s cubic-bezier(${J.join(",")})`,transform:K(s)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`}),w&&r!==w.length-1&&void 0!==o&&r!==o&&r<o?X(i.current,{transition:`opacity 0.5s cubic-bezier(${J.join(",")})`,opacity:"0"}):X(i.current,{transition:`opacity 0.5s cubic-bezier(${J.join(",")})`,opacity:"1"}),f(null==a?void 0:a[Math.max(r,0)])},[n.current,a,w,o,i,f]);return r.default.useEffect(()=>{if(c||e){var t;let r=null!=(t=null==a?void 0:a.findIndex(t=>t===e||t===c))?t:-1;w&&-1!==r&&"number"==typeof w[r]&&b(w[r])}},[c,e,a,w,b]),{isLastSnapPoint:g,activeSnapPoint:c,shouldFade:v,getPercentageDragged:function(e,t){if(!a||"number"!=typeof h||!w||void 0===o)return null;let r=h===o-1;if(h>=o&&t)return 0;if(r&&!t)return 1;if(!v&&!r)return null;let n=r?h+1:h-1,i=e/Math.abs(r?w[n]-w[n-1]:w[n+1]-w[n]);return r?1-i:i},setActiveSnapPoint:f,activeSnapPointIndex:h,onRelease:function({draggedDistance:e,closeDrawer:t,velocity:r,dismissible:n}){if(void 0===o)return;let l="bottom"===s||"right"===s?(null!=x?x:0)-e:(null!=x?x:0)+e,d=h===o-1,c=0===h,f=e>0;if(d&&X(i.current,{transition:`opacity 0.5s cubic-bezier(${J.join(",")})`}),!u&&r>2&&!f)return void(n?t():b(w[0]));if(!u&&r>2&&f&&w&&a)return void b(w[a.length-1]);let m=null==w?void 0:w.reduce((e,t)=>"number"!=typeof e||"number"!=typeof t?e:Math.abs(t-l)<Math.abs(e-l)?t:e),p=K(s)?window.innerHeight:window.innerWidth;if(r>.4&&Math.abs(e)<.4*p){let e=f?1:-1;return e>0&&g&&a?void b(w[a.length-1]):void(c&&e<0&&n&&t(),null===h||b(w[h+e]))}b(m)},onDrag:function({draggedDistance:e}){if(null===x)return;let t="bottom"===s||"right"===s?x-e:x+e;("bottom"===s||"right"===s)&&t<w[w.length-1]||("top"===s||"left"===s)&&t>w[w.length-1]||X(n.current,{transform:K(s)?`translate3d(0, ${t}px, 0)`:`translate3d(${t}px, 0, 0)`})},snapPointsOffset:w}}({snapPoints:l,activeSnapPointProp:g,setActiveSnapPointProp:h,drawerRef:ew,fadeFromIndex:p,overlayRef:el,onSnapPointChange:ej,direction:j,container:D,snapToSequentialPoint:C});!function(e={}){let{isDisabled:a}=e;F(()=>{if(!a){var e,r,n;let a,i,o,l,s,d,u;return 1==++B&&A()&&(o=0,l=window.pageXOffset,s=window.pageYOffset,d=O((e=document.documentElement,r="paddingRight",n=`${window.innerWidth-document.documentElement.clientWidth}px`,a=e.style[r],e.style[r]=n,()=>{e.style[r]=a})),window.scrollTo(0,0),u=O(W(document,"touchstart",e=>{((i=H(e.target))!==document.documentElement||i!==document.body)&&(o=e.changedTouches[0].pageY)},{passive:!1,capture:!0}),W(document,"touchmove",e=>{if(!i||i===document.documentElement||i===document.body)return void e.preventDefault();let t=e.changedTouches[0].pageY,a=i.scrollTop,r=i.scrollHeight-i.clientHeight;0!==r&&((a<=0&&t>o||a>=r&&t<o)&&e.preventDefault(),o=t)},{passive:!1,capture:!0}),W(document,"touchend",e=>{let t=e.target;U(t)&&t!==document.activeElement&&(e.preventDefault(),t.style.transform="translateY(-2000px)",t.focus(),requestAnimationFrame(()=>{t.style.transform=""}))},{passive:!1,capture:!0}),W(document,"focus",e=>{let t=e.target;U(t)&&(t.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{t.style.transform="",L&&(L.height<window.innerHeight?requestAnimationFrame(()=>{q(t)}):L.addEventListener("resize",()=>q(t),{once:!0}))}))},!0),W(window,"scroll",()=>{window.scrollTo(0,0)})),t=()=>{d(),u(),window.scrollTo(l,s)}),()=>{0==--B&&(null==t||t())}}},[a])}({isDisabled:!Y||er||!w||ei||!_||!R||!N});let{restorePositionSetting:eD}=function({isOpen:e,modal:t,nested:a,hasBeenOpened:n,preventScrollRestoration:i,noBodyStyles:o}){let[l,s]=r.default.useState(()=>"u">typeof window?window.location.href:""),d=r.default.useRef(0),u=r.default.useCallback(()=>{if(S()&&null===ea&&e&&!o){ea={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};let{scrollX:e,innerHeight:t}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-d.current}px`,left:`${-e}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{let e=t-window.innerHeight;e&&d.current>=t&&(document.body.style.top=`${-(d.current+e)}px`)}),300)}},[e]),c=r.default.useCallback(()=>{if(S()&&null!==ea&&!o){let e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);Object.assign(document.body.style,ea),window.requestAnimationFrame(()=>{i&&l!==window.location.href?s(window.location.href):window.scrollTo(t,e)}),ea=null}},[l]);return r.default.useEffect(()=>{function e(){d.current=window.scrollY}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),r.default.useEffect(()=>{if(t)return()=>{"u"<typeof document||document.querySelector("[data-vaul-drawer]")||c()}},[t,c]),r.default.useEffect(()=>{!a&&n&&(e?(window.matchMedia("(display-mode: standalone)").matches||u(),t||window.setTimeout(()=>{c()},500)):c())},[e,n,l,t,a,u,c]),{restorePositionSetting:c}}({isOpen:Y,modal:w,nested:null!=b&&b,hasBeenOpened:_,preventScrollRestoration:T,noBodyStyles:y});function eS(){return(window.innerWidth-26)/window.innerWidth}function eA(e,t){var a;let r=e,n=null==(a=window.getSelection())?void 0:a.toString(),i=ew.current?G(ew.current,j):null,o=new Date;if("SELECT"===r.tagName||r.hasAttribute("data-vaul-no-drag")||r.closest("[data-vaul-no-drag]"))return!1;if("right"===j||"left"===j)return!0;if(es.current&&o.getTime()-es.current.getTime()<500)return!1;if(null!==i&&("bottom"===j?i>0:i<0))return!0;if(n&&n.length>0)return!1;if(ec.current&&o.getTime()-ec.current.getTime()<c&&0===i||t)return ec.current=o,!1;for(;r;){if(r.scrollHeight>r.clientHeight){if(0!==r.scrollTop)return ec.current=new Date,!1;if("dialog"===r.getAttribute("role"))break}r=r.parentNode}return!0}function eP(e){er&&ew.current&&(ew.current.classList.remove(Q),ef.current=!1,en(!1),eu.current=new Date),null==x||x(),e||Z(!1),setTimeout(()=>{l&&eC(l[0])},500)}function eF(){if(!ew.current)return;let e=document.querySelector("[data-vaul-drawer-wrapper]"),t=G(ew.current,j);X(ew.current,{transform:"translate3d(0, 0, 0)",transition:`transform 0.5s cubic-bezier(${J.join(",")})`}),X(el.current,{transition:`opacity 0.5s cubic-bezier(${J.join(",")})`,opacity:"1"}),s&&t&&t>0&&Y&&X(e,{borderRadius:"8px",overflow:"hidden",...K(j)?{transform:`scale(${eS()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${eS()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:"0.5s",transitionTimingFunction:`cubic-bezier(${J.join(",")})`},!0)}return r.default.useEffect(()=>{window.requestAnimationFrame(()=>{eh.current=!0})},[]),r.default.useEffect(()=>{var e;function t(){if(ew.current&&R&&(U(document.activeElement)||eg.current)){var e;let t=(null==(e=window.visualViewport)?void 0:e.height)||0,a=window.innerHeight,r=a-t,n=ew.current.getBoundingClientRect().height||0;ey.current||(ey.current=n);let i=ew.current.getBoundingClientRect().top;if(Math.abs(ev.current-r)>60&&(eg.current=!eg.current),l&&l.length>0&&eR&&eN&&(r+=eR[eN]||0),ev.current=r,n>t||eg.current){let e=ew.current.getBoundingClientRect().height,o=e;e>t&&(o=t-(n>.8*a?i:26)),v?ew.current.style.height=`${e-Math.max(r,0)}px`:ew.current.style.height=`${Math.max(o,t-i)}px`}else{let e;e=navigator.userAgent,"u">typeof window&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))||(ew.current.style.height=`${ey.current}px`)}l&&l.length>0&&!eg.current?ew.current.style.bottom="0px":ew.current.style.bottom=`${Math.max(r,0)}px`}}return null==(e=window.visualViewport)||e.addEventListener("resize",t),()=>{var e;return null==(e=window.visualViewport)?void 0:e.removeEventListener("resize",t)}},[eN,l,eR]),r.default.useEffect(()=>(Y&&(X(document.documentElement,{scrollBehavior:"auto"}),es.current=new Date),()=>{!function(e,t){if(!e||!(e instanceof HTMLElement))return;let a=V.get(e);a&&(e.style[t]=a[t])}(document.documentElement,"scrollBehavior")}),[Y]),r.default.useEffect(()=>{w||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[w]),r.default.createElement(M.Root,{defaultOpen:k,onOpenChange:e=>{(f||e)&&(e?et(!0):eP(!0),Z(e))},open:Y},r.default.createElement($.Provider,{value:{activeSnapPoint:ek,snapPoints:l,setActiveSnapPoint:eC,drawerRef:ew,overlayRef:el,onOpenChange:a,onPress:function(e){var t,a;!f&&!l||(!ew.current||ew.current.contains(e.target))&&(ex.current=(null==(t=ew.current)?void 0:t.getBoundingClientRect().height)||0,eb.current=(null==(a=ew.current)?void 0:a.getBoundingClientRect().width)||0,en(!0),ed.current=new Date,A()&&window.addEventListener("touchend",()=>ef.current=!1,{once:!0}),e.target.setPointerCapture(e.pointerId),ep.current=K(j)?e.pageY:e.pageX)},onRelease:function(e){var t,a;if(!er||!ew.current)return;ew.current.classList.remove(Q),ef.current=!1,en(!1),eu.current=new Date;let r=G(ew.current,j);if(!e||!eA(e.target,!1)||!r||Number.isNaN(r)||null===ed.current)return;let n=eu.current.getTime()-ed.current.getTime(),i=ep.current-(K(j)?e.pageY:e.pageX),s=Math.abs(i)/n;if(s>.05&&(eo(!0),setTimeout(()=>{eo(!1)},200)),l){eT({draggedDistance:i*("bottom"===j||"right"===j?1:-1),closeDrawer:eP,velocity:s,dismissible:f}),null==o||o(e,!0);return}if("bottom"===j||"right"===j?i>0:i<0){eF(),null==o||o(e,!0);return}if(s>.4){eP(),null==o||o(e,!1);return}let d=Math.min(null!=(t=ew.current.getBoundingClientRect().height)?t:0,window.innerHeight),c=Math.min(null!=(a=ew.current.getBoundingClientRect().width)?a:0,window.innerWidth);if(Math.abs(r)>=("left"===j||"right"===j?c:d)*u){eP(),null==o||o(e,!1);return}null==o||o(e,!0),eF()},onDrag:function(e){if(ew.current&&er){let t="bottom"===j||"right"===j?1:-1,a=(ep.current-(K(j)?e.pageY:e.pageX))*t,r=a>0,n=l&&!f&&!r;if(n&&0===eN)return;let o=Math.abs(a),d=document.querySelector("[data-vaul-drawer-wrapper]"),u=o/("bottom"===j||"top"===j?ex.current:eb.current),c=e$(o,r);if(null!==c&&(u=c),n&&u>=1||!ef.current&&!eA(e.target,r))return;if(ew.current.classList.add(Q),ef.current=!0,X(ew.current,{transition:"none"}),X(el.current,{transition:"none"}),l&&eE({draggedDistance:a}),r&&!l){let e=Math.min(-(8*(Math.log(a+1)-2)*1),0)*t;X(ew.current,{transform:K(j)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`});return}let m=1-u;if((eM||p&&eN===p-1)&&(null==i||i(e,u),X(el.current,{opacity:`${m}`,transition:"none"},!0)),d&&el.current&&s){let e=Math.min(eS()+u*(1-eS()),1),t=8-8*u,a=Math.max(0,14-14*u);X(d,{borderRadius:`${t}px`,transform:K(j)?`scale(${e}) translate3d(0, ${a}px, 0)`:`scale(${e}) translate3d(${a}px, 0, 0)`,transition:"none"},!0)}if(!l){let e=o*t;X(ew.current,{transform:K(j)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`})}}},dismissible:f,shouldAnimate:eh,handleOnly:m,isOpen:Y,isDragging:er,shouldFade:eM,closeDrawer:eP,onNestedDrag:function(e,t){if(t<0)return;let a=(window.innerWidth-16)/window.innerWidth,r=a+t*(1-a),n=-16+16*t;X(ew.current,{transform:K(j)?`scale(${r}) translate3d(0, ${n}px, 0)`:`scale(${r}) translate3d(${n}px, 0, 0)`,transition:"none"})},onNestedOpenChange:function(e){let t=e?(window.innerWidth-16)/window.innerWidth:1,a=e?-16:0;em.current&&window.clearTimeout(em.current),X(ew.current,{transition:`transform 0.5s cubic-bezier(${J.join(",")})`,transform:K(j)?`scale(${t}) translate3d(0, ${a}px, 0)`:`scale(${t}) translate3d(${a}px, 0, 0)`}),!e&&ew.current&&(em.current=setTimeout(()=>{let e=G(ew.current,j);X(ew.current,{transition:"none",transform:K(j)?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`})},500))},onNestedRelease:function(e,t){let a=K(j)?window.innerHeight:window.innerWidth,r=t?(a-16)/a:1,n=t?-16:0;t&&X(ew.current,{transition:`transform 0.5s cubic-bezier(${J.join(",")})`,transform:K(j)?`scale(${r}) translate3d(0, ${n}px, 0)`:`scale(${r}) translate3d(${n}px, 0, 0)`})},keyboardIsOpen:eg,modal:w,snapPointsOffset:eR,activeSnapPointIndex:eN,direction:j,shouldScaleBackground:s,setBackgroundColorOnScale:d,noBodyStyles:y,container:D,autoFocus:P}},n))}let en=r.default.forwardRef(function({...e},t){let{overlayRef:a,snapPoints:n,onRelease:i,shouldFade:o,isOpen:l,modal:s,shouldAnimate:d}=D(),u=Y(t,a),c=n&&n.length>0;if(!s)return null;let f=r.default.useCallback(e=>i(e),[i]);return r.default.createElement(M.Overlay,{onMouseUp:f,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":l&&c?"true":"false","data-vaul-snap-points-overlay":l&&o?"true":"false","data-vaul-animate":(null==d?void 0:d.current)?"true":"false",...e})});en.displayName="Drawer.Overlay";let ei=r.default.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:a,...n},i){let{drawerRef:o,onPress:l,onRelease:s,onDrag:d,keyboardIsOpen:u,snapPointsOffset:c,activeSnapPointIndex:f,modal:m,isOpen:p,direction:g,snapPoints:h,container:v,handleOnly:w,shouldAnimate:x,autoFocus:b}=D(),[y,j]=r.default.useState(!1),k=Y(i,o),N=r.default.useRef(null),C=r.default.useRef(null),T=r.default.useRef(!1),R=h&&h.length>0;function E(e){N.current=null,T.current=!1,s(e)}return!function(){let{direction:e,isOpen:t,shouldScaleBackground:a,setBackgroundColorOnScale:n,noBodyStyles:i}=D(),o=r.default.useRef(null),l=(0,r.useMemo)(()=>document.body.style.backgroundColor,[]);function s(){return(window.innerWidth-26)/window.innerWidth}r.default.useEffect(()=>{if(t&&a){o.current&&clearTimeout(o.current);let t=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!t)return;!function(...e){}(n&&!i?Z(document.body,{background:"black"}):et,Z(t,{transformOrigin:K(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:"0.5s",transitionTimingFunction:`cubic-bezier(${J.join(",")})`}));let a=Z(t,{borderRadius:"8px",overflow:"hidden",...K(e)?{transform:`scale(${s()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${s()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{a(),o.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},500)}}},[t,a,l])}(),r.default.useEffect(()=>{R&&window.requestAnimationFrame(()=>{j(!0)})},[]),r.default.createElement(M.Content,{"data-vaul-drawer-direction":g,"data-vaul-drawer":"","data-vaul-delayed-snap-points":y?"true":"false","data-vaul-snap-points":p&&R?"true":"false","data-vaul-custom-container":v?"true":"false","data-vaul-animate":(null==x?void 0:x.current)?"true":"false",...n,ref:k,style:c&&c.length>0?{"--snap-point-height":`${c[null!=f?f:0]}px`,...t}:t,onPointerDown:e=>{w||(null==n.onPointerDown||n.onPointerDown.call(n,e),N.current={x:e.pageX,y:e.pageY},l(e))},onOpenAutoFocus:e=>{null==a||a(e),b||e.preventDefault()},onPointerDownOutside:t=>{(null==e||e(t),!m||t.defaultPrevented)?t.preventDefault():u.current&&(u.current=!1)},onFocusOutside:e=>{if(!m)return void e.preventDefault()},onPointerMove:e=>{if(C.current=e,w||(null==n.onPointerMove||n.onPointerMove.call(n,e),!N.current))return;let t=e.pageY-N.current.y,a=e.pageX-N.current.x,r="touch"===e.pointerType?10:2;((e,t,a=0)=>{if(T.current)return!0;let r=Math.abs(e.y),n=Math.abs(e.x),i=n>r,o=["bottom","right"].includes(t)?1:-1;if("left"===t||"right"===t){if(!(e.x*o<0)&&n>=0&&n<=a)return i}else if(!(e.y*o<0)&&r>=0&&r<=a)return!i;return T.current=!0,!0})({x:a,y:t},g,r)?d(e):(Math.abs(a)>r||Math.abs(t)>r)&&(N.current=null)},onPointerUp:e=>{null==n.onPointerUp||n.onPointerUp.call(n,e),N.current=null,T.current=!1,s(e)},onPointerOut:e=>{null==n.onPointerOut||n.onPointerOut.call(n,e),E(C.current)},onContextMenu:e=>{null==n.onContextMenu||n.onContextMenu.call(n,e),C.current&&E(C.current)}})});ei.displayName="Drawer.Content";let eo=r.default.forwardRef(function({preventCycle:e=!1,children:t,...a},n){let{closeDrawer:i,isDragging:o,snapPoints:l,activeSnapPoint:s,setActiveSnapPoint:d,dismissible:u,handleOnly:c,isOpen:f,onPress:m,onDrag:p}=D(),g=r.default.useRef(null),h=r.default.useRef(!1);function v(){g.current&&window.clearTimeout(g.current),h.current=!1}return r.default.createElement("div",{onClick:function(){h.current?v():window.setTimeout(()=>{!function(){if(o||e||h.current)return v();if(v(),!l||0===l.length){u||i();return}if(s===l[l.length-1]&&u)return i();let t=l.findIndex(e=>e===s);-1===t||d(l[t+1])}()},120)},onPointerCancel:v,onPointerDown:e=>{c&&m(e),g.current=window.setTimeout(()=>{h.current=!0},250)},onPointerMove:e=>{c&&p(e)},ref:n,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...a},r.default.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});eo.displayName="Drawer.Handle";let el={Root:er,NestedRoot:function({onDrag:e,onOpenChange:t,open:a,...n}){let{onNestedDrag:i,onNestedOpenChange:o,onNestedRelease:l}=D();if(!i)throw Error("Drawer.NestedRoot must be placed in another drawer");return r.default.createElement(er,{nested:!0,open:a,onClose:()=>{o(!1)},onDrag:(t,a)=>{i(t,a),null==e||e(t,a)},onOpenChange:e=>{e&&o(e),null==t||t(e)},onRelease:l,...n})},Content:ei,Overlay:en,Trigger:M.Trigger,Portal:function(e){let t=D(),{container:a=t.container,...n}=e;return r.default.createElement(M.Portal,{container:a,...n})},Handle:eo,Close:M.Close,Title:M.Title,Description:M.Description};function es({...e}){return(0,a.jsx)(el.Root,{"data-slot":"drawer",...e})}function ed({...e}){return(0,a.jsx)(el.Portal,{"data-slot":"drawer-portal",...e})}function eu({className:e,...t}){return(0,a.jsx)(el.Overlay,{"data-slot":"drawer-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function ec({className:e,children:t,...r}){return(0,a.jsxs)(ed,{"data-slot":"drawer-portal",children:[(0,a.jsx)(eu,{}),(0,a.jsxs)(el.Content,{"data-slot":"drawer-content",className:(0,g.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",e),...r,children:[(0,a.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),t]})]})}function ef({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"drawer-header",className:(0,g.cn)("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",e),...t})}function em({className:e,...t}){return(0,a.jsx)(el.Title,{"data-slot":"drawer-title",className:(0,g.cn)("text-foreground font-semibold",e),...t})}function ep({className:e,...t}){return(0,a.jsx)(el.Description,{"data-slot":"drawer-description",className:(0,g.cn)("text-muted-foreground text-sm",e),...t})}var eg=e.i(93479);function eh({isOpen:e,onOpenChange:t,tags:n=["ARCHITECTURE","MINIMALISM","DESIGN"],onSave:i}){let[o,l]=(0,r.useState)(n),[s,d]=(0,r.useState)(""),[u,c]=(0,r.useState)(!1),f=(0,w.useTranslation)();return(0,a.jsx)(es,{open:e,onOpenChange:t,children:(0,a.jsxs)(ec,{className:"bg-white dark:bg-[#1A1A1A] rounded-t-[32px] border-none shadow-2xl max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-12 h-1 bg-gray-200 dark:bg-gray-800 rounded-full mx-auto mt-4 mb-2"}),(0,a.jsxs)("div",{className:"px-8 pt-6 pb-12",children:[(0,a.jsxs)(ef,{className:"p-0 mb-8 text-left",children:[(0,a.jsx)(em,{className:"text-xl font-bold tracking-tight text-gray-900 dark:text-gray-100",children:f.article.editTags}),(0,a.jsx)(ep,{className:"sr-only",children:f.article.editTagsDescription})]}),(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsx)(eg.Input,{className:"w-full bg-transparent border-t-0 border-l-0 border-r-0 border-b border-gray-100 dark:border-gray-800 px-0 py-2 focus-visible:ring-0 focus-visible:border-primary text-lg placeholder-gray-300 dark:placeholder-gray-600 transition-colors shadow-none rounded-none",placeholder:f.article.addTag,value:s,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&s.trim()&&(o.includes(s.trim().toUpperCase())||l([...o,s.trim().toUpperCase()]),d(""))}})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mb-12",children:o.map((e,t)=>(0,a.jsxs)("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full group ${0===t?"bg-primary/5 dark:bg-primary/10":"border border-gray-100 dark:border-gray-800"}`,children:[(0,a.jsx)("span",{className:`text-[11px] font-bold uppercase tracking-[0.15em] ${0===t?"text-primary":"text-gray-500 dark:text-gray-400"}`,children:e}),(0,a.jsx)("button",{onClick:()=>{l(o.filter(t=>t!==e))},className:`flex items-center justify-center p-0.5 rounded-full ${0===t?"hover:bg-primary/10":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:(0,a.jsx)(E.X,{className:`w-3.5 h-3.5 ${0===t?"font-bold text-primary":"text-gray-500 dark:text-gray-400"}`})})]},e))}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-6 pt-4",children:[(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-[12px] font-bold uppercase tracking-widest text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:f.common.cancel}),(0,a.jsx)("button",{onClick:async()=>{if(i){c(!0);try{await i(o),t(!1)}finally{c(!1)}}else t(!1)},disabled:u,className:"px-8 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-full text-[12px] font-bold uppercase tracking-widest hover:bg-black dark:hover:bg-white transition-all active:scale-95 shadow-lg disabled:opacity-50",children:u?"Saving...":f.common.save})]})]}),(0,a.jsx)("div",{className:"h-6 w-full"})]})})}var ev=e.i(84365),ew=e.i(77732),ex=e.i(57615),eb=e.i(39257);let ey=(0,T.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),ej=(0,T.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function ek({summary:e,thinking:t,ankiContent:n}){let i=(0,w.useTranslation)(),[o,l]=(0,r.useState)(0),s=(0,r.useRef)(null),d=[{id:"GUIDE",title:i.nav.guide,icon:(0,a.jsx)(ey,{className:"w-[18px] h-[18px] text-primary/60 dark:text-primary/40"}),content:n||"No guide available."},{id:"summary",title:i.article.summary,icon:(0,a.jsx)(eb.Sparkles,{className:"w-[18px] h-[18px] text-primary/60 dark:text-primary/40"}),content:e||"AI is generating a summary for you..."},{id:"thinking",title:i.article.thinking,icon:(0,a.jsx)(ej,{className:"w-[18px] h-[18px] text-primary/60 dark:text-primary/40"}),content:t||"Reflecting on the deeper implications..."}];return(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-8 mb-6",children:d.map((e,t)=>(0,a.jsx)("button",{onClick:()=>{s.current&&s.current.scrollTo({left:t*s.current.clientWidth,behavior:"smooth"})},className:(0,g.cn)("text-[11px] font-bold tracking-wider uppercase pb-1 border-b-[1.5px] transition-all",o===t?"text-gray-900 dark:text-gray-50 border-gray-900 dark:border-gray-50":"text-gray-400 dark:text-gray-500 border-transparent hover:text-gray-700 dark:hover:text-gray-300"),children:e.title},e.id))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{ref:s,onScroll:()=>{if(!s.current)return;let e=s.current.clientWidth;l(Math.round(s.current.scrollLeft/e))},className:"flex overflow-x-auto snap-x snap-mandatory no-scrollbar pb-8 gap-4",style:{WebkitOverflowScrolling:"touch"},children:d.map(e=>(0,a.jsx)("div",{className:"snap-center shrink-0 w-full",children:(0,a.jsxs)("div",{className:"border border-gray-100 dark:border-gray-800 rounded-xl p-6 bg-white dark:bg-gray-900/40 h-full min-h-[190px] shadow-md hover:shadow-lg transition-all duration-300 overflow-y-auto no-scrollbar",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-[10px] font-bold shadow-sm px-2 py-0.5 rounded bg-white dark:bg-gray-800 uppercase tracking-[0.2em] text-gray-400",children:e.title}),e.icon]}),(0,a.jsx)("div",{className:"text-[15px] leading-relaxed text-gray-700 dark:text-gray-300 font-sans prose dark:prose-invert max-w-none",children:(0,a.jsx)(ev.default,{children:e.content})})]})},e.id))}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center gap-1.5 pb-1",children:d.map((e,t)=>(0,a.jsx)("div",{className:(0,g.cn)("rounded-full transition-all duration-300",o===t?"w-8 h-1 bg-gray-800 dark:bg-gray-200":"w-1 h-1 bg-gray-300 dark:bg-gray-700")},t))})]})]})}var eN=e.i(44872);function eC({article:e,insights:t=[]}){let[n,i]=(0,r.useState)(!1),{loadImages:o}=(0,ew.useSettingsStore)(),l=(0,w.useTranslation)(),s=async t=>{let a=await (0,eN.updateArticleTagsAction)(e.uuid,t);a.success||console.error("Failed to update tags:",a.message)},d=e.tags&&e.tags.length>0?e.tags:[e.category],u=t.find(e=>"Summary"===e.category)?.content,c=t.find(e=>"Thinking"===e.category)?.content,f=t.find(e=>"Insight"===e.category)?.content,m=!!(u||c||f);return(0,a.jsxs)("main",{className:"flex-1 overflow-y-auto no-scrollbar pb-32",children:[(0,a.jsxs)("div",{className:"px-8 pt-8",children:[(0,a.jsx)("h1",{className:"text-[42px] leading-[1.15] font-serif font-semibold text-gray-900 dark:text-gray-50 tracking-tight mb-6 break-words",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-3 mb-8",children:[(0,a.jsx)(N,{variant:"secondary",className:"text-[10px] font-bold uppercase tracking-[0.15em] text-primary bg-primary/5 hover:bg-primary/10 px-2.5 py-1 rounded-sm border-none shadow-none",children:e.category}),e.tags?.map(e=>(0,a.jsx)(N,{variant:"outline",className:"text-[10px] font-bold uppercase tracking-[0.15em] text-gray-400 border-gray-100 dark:border-gray-800 px-2.5 py-1 rounded-sm shadow-none",children:e},e)),(0,a.jsx)("button",{onClick:()=>i(!0),className:"flex items-center text-gray-400 hover:text-primary transition-colors ml-1",title:l.article.editTags,children:(0,a.jsx)(C.Pencil,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-[0.15em] text-gray-400 ml-auto",children:"8 min read"})]}),m&&(0,a.jsx)(ek,{summary:u,thinking:c,ankiContent:f}),e.cover&&o&&(0,a.jsx)("div",{className:"w-full aspect-[16/10] rounded-2xl overflow-hidden mb-12 relative shadow-soft",children:(0,a.jsx)(ex.default,{src:e.cover,alt:e.title,fill:!0,className:"object-cover",priority:!0})}),(0,a.jsx)("article",{className:"font-serif text-[21px] leading-[1.8] text-gray-800 dark:text-gray-200",children:(0,a.jsx)(ev.default,{components:{img:({src:e,alt:t})=>o?(0,a.jsx)("img",{src:e,alt:t||"",className:"rounded-lg"}):(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2 w-full py-8 bg-slate-100 dark:bg-slate-800 rounded-lg text-sm text-slate-400 dark:text-slate-500",children:[(0,a.jsx)(R,{className:"w-4 h-4"}),t||"[å›¾ç‰‡å·²éšè—]"]}),blockquote:({children:e})=>(0,a.jsxs)("div",{className:"my-12 px-2 text-center",children:[(0,a.jsx)("blockquote",{className:"text-3xl font-serif italic text-gray-900 dark:text-gray-100 leading-tight not-italic [&>p]:mb-0",children:e}),(0,a.jsx)("div",{className:"mt-4 w-12 h-0.5 bg-primary/30 mx-auto"})]})},children:e.content})})]}),(0,a.jsx)(eh,{isOpen:n,onOpenChange:i,tags:d,onSave:s})]})}let eT=(0,h.createServerReference)("787e23e8ff970de1a56ffdc688beda17eaa2b717b0",h.callServer,void 0,h.findSourceMapURL,"processAiPromptAction");var eR=e.i(19455),eE=e.i(76639);function eM({className:e,...t}){return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,g.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function e$({article:e}){let[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),{hasAiHistory:l,expectation:s,setExpectation:d}=p(),u=(0,w.useTranslation)();if(l)return null;let c=async()=>{if(!t){n(!0);try{(await eT(e.content,e.title,e.uuid,s)).success&&o(!1)}catch(e){console.error("AI Click Error:",e)}finally{n(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed bottom-8 right-8 z-50",children:(0,a.jsx)("button",{onClick:()=>o(!0),disabled:t,className:(0,g.cn)("w-14 h-14 rounded-2xl flex items-center justify-center shadow-ai-fab active:scale-95 transition-all duration-200 group disabled:opacity-70","bg-gradient-to-br from-[#2e6a7a] to-[#4a9fb5]"),children:(0,a.jsx)(eb.Sparkles,{className:(0,g.cn)("w-7 h-7 text-white transition-all",t?"animate-pulse":"group-hover:rotate-12")})})}),(0,a.jsx)(eE.Dialog,{open:i,onOpenChange:o,children:(0,a.jsxs)(eE.DialogContent,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(eE.DialogHeader,{children:(0,a.jsx)(eE.DialogTitle,{children:u.article.aiInsight.title})}),(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{htmlFor:"expectation",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:u.article.aiInsight.label}),(0,a.jsx)(eM,{id:"expectation",placeholder:u.article.aiInsight.placeholder,className:"col-span-3 min-h-[100px]",value:s,onChange:e=>d(e.target.value)})]})}),(0,a.jsxs)(eE.DialogFooter,{children:[(0,a.jsx)(eR.Button,{variant:"outline",onClick:()=>o(!1),disabled:t,children:u.common.cancel}),(0,a.jsx)(eR.Button,{onClick:c,disabled:t,children:t?u.article.aiInsight.generating:u.article.aiInsight.generate})]})]})})]})}var eD=e.i(79278);function eS({initialId:e,initialData:t,initialInsights:i=[],initialHasAiHistory:o=!1}){let{article:l,isLoading:s,error:d,fetchArticle:u}=p(),c=(0,w.useTranslation)();(0,r.useEffect)(()=>{p.setState({article:t,isLoading:!1,error:t?null:"Article not found",hasAiHistory:o,insights:i}),t||u(e)},[e,t,u,o]);let f=l||t;return s&&!f?(0,a.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-white dark:bg-[#0a0a0a]",children:(0,a.jsx)(eD.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):d||!f?(0,a.jsxs)("div",{className:"flex h-screen w-full items-center justify-center bg-white dark:bg-[#0a0a0a] flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-slate-500",children:c.article.notFound}),(0,a.jsx)(n.default,{href:"/",className:"text-primary hover:underline",children:c.article.goHome})]}):(0,a.jsx)("div",{className:"relative min-h-screen w-full bg-white dark:bg-[#0a0a0a]",children:(0,a.jsxs)("div",{className:"relative min-h-screen w-full mx-auto md:max-w-2xl lg:max-w-4xl xl:max-w-6xl bg-white dark:bg-[#0a0a0a] flex flex-col font-sans border-x border-slate-100 dark:border-white/5",children:[(0,a.jsx)(y,{}),(0,a.jsx)(eC,{article:f,insights:i}),(0,a.jsx)(e$,{article:f})]})})}e.s(["ArticleView",()=>eS],26456)}]);