(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23714,e=>{"use strict";let t=(0,e.i(98631).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],23714)},35449,(e,t,r)=>{t.exports=e.r(34516)},8943,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},7705,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=e.r(66634);function n(e,t){let r=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=i(e,a)),t&&(n.current=i(t,a))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},30438,e=>{e.v({nav:{home:"HOME",library:"LIBRARY",guide:"GUIDE",profile:"PROFILE"},home:{todaysRead:"Today's Read",mustRead:"MUST READ",selectedForYou:"SELECTED FOR YOU",contentTypes:{all:"All",tutorial:"Tutorial",concept:"Concept",narrative:"Narrative",opinion:"Opinion",news:"News",resource:"Resource",collection:"Collection",pin:"Pin",favorite:"Favorite",answer:"Answer",article:"Article"}},search:{placeholder:"Search topics, articles...",discovery:"Discovery",recent:"RECENT",clearAll:"CLEAR ALL",resultsFor:"Results for",noResults:"No results found.",searching:"Searching...",trending:"Trending Now",filters:{title:"Filters",sortBy:"Sort By",category:"Category",all:"All",reset:"Reset all filters",articles:"Articles",sortOptions:{relevance:"Recommended",newest:"Newest",oldest:"Oldest"}}},library:{title:"Library",subtitle:"Curated Collections",seeAll:"See All",empty:"No collections found.",seedHint:"Run 'pnpm seed' to populate data.",updated:"Updated",books:"Books",syncTitle:"Pull books from OPDS",syncStatus:"Sync Status",syncRunning:"Syncing Library",syncSuccess:"Sync Complete",syncError:"Sync Failed",initializing:"Initializing...",preparing:"Preparing...",foundBooks:"Found {count} books",importing:"Importing: {title}",syncCompleteCount:"Sync complete. Imported {count} new books",noBooksFound:"No books found",search:"Search Collections",searchPlaceholder:"Enter collection name...",createNew:"Create New",editCollection:"Edit Collection",deleteCollection:"Delete Collection",deleteConfirm:"Are you sure you want to delete this collection? Books will not be deleted.",collectionName:"Collection Name",enterName:"Enter collection name",sortBy:"Sort",sortByName:"By Name",sortByDate:"By Date",sortByCustom:"Custom Order",addToCollection:"Add to Collection",removeFromCollection:"Remove from Collection"},profile:{title:"Profile",settings:"Settings",appearance:"Appearance",preferences:"Preferences",language:"Language",theme:"Theme",logOut:"Log Out",readingHistory:"Reading History",chatHistory:"Chat History",view:"VIEW",dataManagement:{title:"Data Management",history:"History",articles:"Articles",chats:"AI Chats",insights:"Insights",library:"Library Data",confirmTitle:"Delete {label}?",confirmDesc:"Are you sure you want to delete all {label}?",deleteWarning:"⚠️ Warning: This action will permanently delete all data and cannot be recovered!",deleteError:"Failed to delete data",deleteSuccess:"Successfully deleted {label}",confirmButton:"Confirm Delete",cancelButton:"Cancel",note:"Note: Deleting data is a permanent action. Once you delete a category, all associated content and preferences will be permanently removed from your device.",threads:"threads"},promptEditor:"Prompt Editor",importData:"Import Data",appSettings:"App Settings",help:"Help & Support",items:"items",articlesRead:"Articles read",wordCount:"Word count",contributionGraph:{title:"Reading Contributions",noData:"No reading data found",weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],totalCount:"{{count}} articles"}},settings:{title:"Settings",appearance:"Appearance",preferences:"Preferences",application:"Application",theme:"Theme",typography:"Typography",notifications:"Notifications",privacy:"Privacy & Security",about:"About",licenses:"Licenses",opds:"OPDS Server",opdsSubtitle:"Connect to external catalogs",connect:"Connect",serverUrl:"Server URL",username:"Username",password:"Password",language:"Language",loadImages:"Load Images",loadImagesSub:"Toggle image loading to save data",aiModel:"AI Model",selectModel:"Select Gemini Model",guideViewMode:{title:"Guide View Mode",swipe:"Swipe Card",feed:"Vertical Feed"}},auth:{welcome:"Welcome back",enter:"Enter",identityAccess:"Identity Access",passphrasePlaceholder:"Enter your passphrase...",loginFailed:"Login failed"},guide:{title:"Guide",progress:"Progress","3minRead":"3 min read",insight:"Insight",noInsights:"No insights found yet.",deleteConfirm:"Delete this insight?",filterAll:"All",filterThinking:"Thinking",filterInsight:"Insight",filterFavorites:"Favorites"},article:{notFound:"Article not found.",goHome:"Go Home",editTags:"Edit Tags",addTag:"Add a new tag...",editTagsDescription:"Edit article tags",summary:"SUMMARY",thinking:"THINKING",aiInsight:{title:"AI Insight Generation",label:"What are you looking for? (Optional)",placeholder:"E.g., Summarize key points, List all tools mentioned...",generating:"Generating...",generate:"Generate"},share:"Share Article",delete:"Delete Article",deleteConfirm:"Are you sure you want to permanently delete this article? This action cannot be undone.",deleteAiChat:"Delete AI Chat",deleteAiChatConfirm:"Are you sure you want to delete the AI chat history for this article?"},common:{save:"Save Changes",cancel:"Cancel",confirm:"Confirm",loading:"Loading..."},promptEditor:{title:"Gemini Prompt",saveChanges:"Save Changes",close:"Close",placeholder:"Start typing your prompt here... use Markdown for structure.",saveSuccess:"Prompt saved successfully",saveError:"Failed to save prompt",restoreDefaults:"Restore Defaults",unsavedChangesTitle:"Unsaved Changes",unsavedChangesDescription:"You have unsaved changes. If you leave, your changes will be lost.",leave:"Leave",stay:"Stay"}})},89778,e=>{e.v({nav:{home:"首页",library:"书馆",guide:"洞察",profile:"我的"},home:{todaysRead:"今日阅读",mustRead:"必读推荐",selectedForYou:"精选内容",contentTypes:{all:"全部",tutorial:"实操教程",concept:"深度解析",narrative:"叙事经历",opinion:"观点评论",news:"资讯快报",resource:"素材资源",collection:"清单合集",pin:"想法",favorite:"收藏",answer:"答案",article:"文章"}},search:{placeholder:"搜索话题、文章...",discovery:"发现",recent:"最近搜索",clearAll:"清除全部",resultsFor:"搜索结果：",noResults:"未找到相关结果",searching:"搜索中...",trending:"热门话题",filters:{title:"筛选",sortBy:"排序方式",category:"分类",all:"全部",reset:"重置所有筛选",articles:"篇文章",sortOptions:{relevance:"推荐",newest:"最新发布",oldest:"最早发布"}}},library:{title:"藏书馆",subtitle:"精选书单",seeAll:"查看全部",empty:"暂无书单",seedHint:"请运行 'pnpm seed' 生成数据",updated:"更新于",books:"本书",syncTitle:"从 OPDS 拉取图书",syncStatus:"同步状态",syncRunning:"正在同步藏书馆",syncSuccess:"同步完成",syncError:"同步失败",initializing:"正在初始化...",preparing:"准备中...",foundBooks:"已找到 {count} 本书",importing:"正在导入: {title}",syncCompleteCount:"同步完成，已导入 {count} 本新书",noBooksFound:"未找到任何书籍",search:"搜索书单",searchPlaceholder:"输入书单名称...",createNew:"新建书单",editCollection:"编辑书单",deleteCollection:"删除书单",deleteConfirm:"确定要删除此书单吗？书单中的书籍不会被删除。",collectionName:"书单名称",enterName:"请输入书单名称",sortBy:"排序",sortByName:"按名称",sortByDate:"按创建时间",sortByCustom:"自定义顺序",addToCollection:"添加到书单",removeFromCollection:"从书单移除"},profile:{title:"个人中心",settings:"设置",appearance:"外观",preferences:"偏好",language:"语言",theme:"主题",logOut:"退出登录",readingHistory:"阅读历史",chatHistory:"对话历史",view:"查看",dataManagement:{title:"数据管理",history:"历史记录",articles:"文章数据",chats:"AI 对话",insights:"洞察数据",library:"藏书馆数据",confirmTitle:"删除 {label}？",confirmDesc:"您确定要删除所有 {label} 吗？",deleteWarning:"⚠️ 警告：此操作将永久删除所有数据，无法恢复！",deleteError:"删除数据失败",deleteSuccess:"已成功删除 {label}",confirmButton:"确认删除",cancelButton:"取消",note:"注意：删除数据是永久性操作。一旦删除某个类别，所有相关内容和设置将从您的设备中永久移除。",threads:"条对话"},promptEditor:"提示词编辑器",importData:"导入数据",appSettings:"应用设置",help:"帮助与支持",items:"项",articlesRead:"已读文章",wordCount:"阅读字数",contributionGraph:{title:"阅读贡献",noData:"暂无阅读数据",weekdays:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],totalCount:"{{count}} 篇文章"}},settings:{title:"设置",appearance:"外观",preferences:"偏好设置",application:"应用程序",theme:"主题",typography:"排版",notifications:"通知",privacy:"隐私与安全",about:"关于",licenses:"开源许可",opds:"OPDS 服务器",opdsSubtitle:"连接外部目录",connect:"连接",serverUrl:"服务器地址",username:"用户名",password:"密码",language:"语言",loadImages:"加载图片",loadImagesSub:"开启图片加载以节省流量",aiModel:"AI 模型",selectModel:"选择生成模型",guideViewMode:{title:"阅读试图模式",swipe:"卡片翻阅",feed:"垂直信息流"}},auth:{welcome:"欢迎回来",enter:"进入",identityAccess:"身份验证",passphrasePlaceholder:"请输入您的口令短语...",loginFailed:"登录失败"},guide:{title:"深度洞察",progress:"进度","3minRead":"3 分钟阅读",insight:"洞察",noInsights:"暂无洞察内容。",deleteConfirm:"确定删除此洞察？",filterAll:"全部",filterThinking:"思考",filterInsight:"洞察",filterFavorites:"收藏"},article:{notFound:"未找到文章。",goHome:"返回首页",editTags:"编辑标签",addTag:"添加新标签...",editTagsDescription:"编辑文章标签",summary:"摘要",thinking:"思考",aiInsight:{title:"AI 洞察生成",label:"您想了解什么？（可选）",placeholder:"例如：总结关键点，列出所有提及的工具...",generating:"正在生成...",generate:"生成"},share:"分享文章",delete:"删除文章",deleteConfirm:"您确定要永久删除这篇文章吗？此操作无法撤销。",deleteAiChat:"删除 AI 对话",deleteAiChatConfirm:"您确定要删除此文章的 AI 对话历史吗？"},common:{save:"保存更改",cancel:"取消",confirm:"确认",loading:"加载中..."},promptEditor:{title:"Gemini 提示词",saveChanges:"保存更改",close:"关闭",placeholder:"在此输入您的提示词... 支持 Markdown 结构。",saveSuccess:"提示词已成功保存",saveError:"保存提示词失败",restoreDefaults:"恢复默认",unsavedChangesTitle:"未保存的更改",unsavedChangesDescription:"您有未保存的更改。如果您离开，这些更改将丢失。",leave:"离开",stay:"留下"}})},71111,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return i.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(61547),o=e.r(55313),l=e.r(81553)},20128,e=>{"use strict";var t=e.i(66634);let r=e=>{let t,r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,i={setState:a,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,n,i);return i},a=e=>{let a=e?r(e):r,n=e=>(function(e,r=e=>e){let a=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>r(e.getState()),[e,r]),t.default.useCallback(()=>r(e.getInitialState()),[e,r]));return t.default.useDebugValue(a),a})(a,e);return Object.assign(n,a),n},n=e=>e?a(e):a;e.s(["create",()=>n],20128)},6891,69087,98183,e=>{"use strict";var t=e.i(20128);let r=e=>t=>{try{let a=e(t);if(a instanceof Promise)return a;return{then:e=>r(e)(a),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>r(t)(e)}}},a=(e,t)=>(a,n,i)=>{let o,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1,c=0,d=new Set,u=new Set,f=l.storage;if(!f)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),a(...e)},n,i);let g=()=>{let e=l.partialize({...n()});return f.setItem(l.name,{state:e,version:l.version})},h=i.setState;i.setState=(e,t)=>(h(e,t),g());let p=e((...e)=>(a(...e),g()),n,i);i.getInitialState=()=>p;let m=()=>{var e,t;if(!f)return;let i=++c;s=!1,d.forEach(e=>{var t;return e(null!=(t=n())?t:p)});let h=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=n())?e:p))||void 0;return r(f.getItem.bind(f))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;if(i!==c)return;let[r,s]=e;if(a(o=l.merge(s,null!=(t=n())?t:p),!0),r)return g()}).then(()=>{i===c&&(null==h||h(o,void 0),o=n(),s=!0,u.forEach(e=>e(o)))}).catch(e=>{i===c&&(null==h||h(void 0,e))})};return i.persist={setOptions:e=>{l={...l,...e},e.storage&&(f=e.storage)},clearStorage:()=>{null==f||f.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>m(),hasHydrated:()=>s,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},l.skipHydration||m(),o||p};e.s(["persist",()=>a],69087);let n=(0,t.create)()(a(e=>({lang:"en",setLang:t=>{e({lang:t}),document.cookie=`NEXT_LOCALE=${t}; path=/; max-age=31536000; SameSite=Lax`}}),{name:"lang-storage"}));e.s(["useLangStore",0,n],98183);var i=e.i(30438),o=e.i(89778);let l={en:i.default,zh:o.default};function s(){let{lang:e}=n();return l[e]}e.s(["useTranslation",()=>s],6891)},53100,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return s},searchParamsToUrlQuery:function(){return i},urlQueryToSearchParams:function(){return l}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});function i(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function l(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,o(e));else t.set(r,o(a));return t}function s(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},86482,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return l},formatWithValidation:function(){return c},urlObjectKeys:function(){return s}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(44066)._(e.r(53100)),o=/https?|ftp|gopher|file/;function l(e){let{auth:t,hostname:r}=e,a=e.protocol||"",n=e.pathname||"",l=e.hash||"",s=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),s&&"object"==typeof s&&(s=String(i.urlQueryToSearchParams(s)));let d=e.search||s&&`?${s}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||o.test(a))&&!1!==c?(c="//"+(c||""),n&&"/"!==n[0]&&(n="/"+n)):c||(c=""),l&&"#"!==l[0]&&(l="#"+l),d&&"?"!==d[0]&&(d="?"+d),n=n.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${n}${d}${l}`}let s=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return l(e)}},75,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return w},MissingStaticPage:function(){return b},NormalizeError:function(){return x},PageNotFoundError:function(){return v},SP:function(){return p},ST:function(){return m},WEB_VITALS:function(){return i},execOnce:function(){return o},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return s},isResSent:function(){return f},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return g},stringifyError:function(){return S}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let l=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>l.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function g(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&f(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="u">typeof performance,m=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class x extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class w extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function S(e){return JSON.stringify({message:e.message,stack:e.stack})}},59664,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return i}});let a=e.r(75),n=e.r(74240);function i(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},63217,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},81756,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return y},useLinkStatus:function(){return v}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(44066),o=e.r(85069),l=i._(e.r(66634)),s=e.r(86482),c=e.r(92116),d=e.r(7705),u=e.r(75),f=e.r(87483);e.r(8943);let g=e.r(79407),h=e.r(59664),p=e.r(21869);function m(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}function y(t){var r;let a,n,i,[s,y]=(0,l.useOptimistic)(g.IDLE_LINK_STATUS),v=(0,l.useRef)(null),{href:b,as:w,children:S,prefetch:k=null,passHref:j,replace:N,shallow:C,scroll:I,onClick:A,onMouseEnter:T,onTouchStart:E,legacyBehavior:L=!1,onNavigate:R,ref:P,unstable_dynamicOnHover:M,...O}=t;a=S,L&&("string"==typeof a||"number"==typeof a)&&(a=(0,o.jsx)("a",{children:a}));let _=l.default.useContext(c.AppRouterContext),D=!1!==k,F=!1!==k?null===(r=k)||"auto"===r?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:U,as:B}=l.default.useMemo(()=>{let e=m(b);return{href:e,as:w?m(w):e}},[b,w]);if(L){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=l.default.Children.only(a)}let $=L?n&&"object"==typeof n&&n.ref:P,H=l.default.useCallback(e=>(null!==_&&(v.current=(0,g.mountLinkInstance)(e,U,_,F,D,y)),()=>{v.current&&((0,g.unmountLinkForCurrentNavigation)(v.current),v.current=null),(0,g.unmountPrefetchableInstance)(e)}),[D,U,_,F,y]),z={ref:(0,d.useMergedRef)(H,$),onClick(t){L||"function"!=typeof A||A(t),L&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!_||t.defaultPrevented||function(t,r,a,n,i,o,s){if("u">typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){i&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),s){let e=!1;if(s({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(56823);l.default.startTransition(()=>{u(a||r,i?"replace":"push",o??!0,n.current)})}}(t,U,B,v,N,I,R)},onMouseEnter(e){L||"function"!=typeof T||T(e),L&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),_&&D&&(0,g.onNavigationIntent)(e.currentTarget,!0===M)},onTouchStart:function(e){L||"function"!=typeof E||E(e),L&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),_&&D&&(0,g.onNavigationIntent)(e.currentTarget,!0===M)}};return(0,u.isAbsoluteUrl)(B)?z.href=B:L&&!j&&("a"!==n.type||"href"in n.props)||(z.href=(0,f.addBasePath)(B)),i=L?l.default.cloneElement(n,z):(0,o.jsx)("a",{...O,...z,children:a}),(0,o.jsx)(x.Provider,{value:s,children:i})}e.r(63217);let x=(0,l.createContext)(g.IDLE_LINK_STATUS),v=()=>(0,l.useContext)(x);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},1508,e=>{"use strict";let t=(0,e.i(98631).default)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Compass",()=>t],1508)},11053,e=>{"use strict";let t=(0,e.i(98631).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);e.s(["Home",()=>t],11053)},99688,e=>{"use strict";let t=(0,e.i(98631).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],99688)},72169,74515,e=>{"use strict";var t=e.i(85069),r=e.i(11053),a=e.i(1508);let n=(0,e.i(98631).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>n],74515);var i=e.i(99688),o=e.i(81756),l=e.i(35449),s=e.i(31924),c=e.i(6891);function d(){let e=(0,l.usePathname)(),d=(0,c.useTranslation)(),u=[{label:d.nav.home,href:"/",icon:r.Home},{label:d.nav.library,href:"/library",icon:n},{label:d.nav.guide,href:"/guide",icon:a.Compass},{label:d.nav.profile,href:"/profile",icon:i.User}];return(0,t.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 dark:bg-black/90 backdrop-blur-xl border-t border-slate-200 dark:border-white/10 pb-8 pt-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between max-w-md mx-auto px-8",children:u.map(r=>{let a=e===r.href,n=r.icon;return(0,t.jsxs)(o.default,{href:r.href,className:(0,s.cn)("flex flex-col items-center gap-1.5 transition-all duration-300",a?"text-primary opacity-100":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 opacity-70 hover:opacity-100"),children:[(0,t.jsx)(n,{className:(0,s.cn)("w-6 h-6 transition-transform duration-300",a?"stroke-[2.5px] scale-105":"stroke-[1.5px]")}),(0,t.jsx)("span",{className:"text-[9px] font-bold tracking-[0.15em] font-sans",children:r.label}),a&&(0,t.jsx)("span",{className:"absolute -bottom-2 w-1 h-1 bg-current rounded-full"})]},r.href)})})})}e.s(["BottomNavbar",()=>d],72169)},14136,e=>{"use strict";let t=(0,e.i(98631).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],14136)},86914,e=>{"use strict";let t=(0,e.i(98631).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],86914)},44095,e=>{"use strict";var t=e.i(66634),r=e.i(44340),a=e.i(85069),n=Symbol.for("react.lazy"),i=t[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===n&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function l(e){var n;let l,s=(n=e,(l=t.forwardRef((e,a)=>{let{children:n,...l}=e;if(o(n)&&"function"==typeof i&&(n=i(n._payload)),t.isValidElement(n)){var s;let e,i,o=(s=n,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),c=function(e,t){let r={...t};for(let a in t){let n=e[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...e)=>{let t=i(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...i}:"className"===a&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...e,...r}}(l,n.props);return n.type!==t.Fragment&&(c.ref=a?(0,r.composeRefs)(a,o):o),t.cloneElement(n,c)}return t.Children.count(n)>1?t.Children.only(null):null})).displayName=`${n}.SlotClone`,l),c=t.forwardRef((e,r)=>{let{children:n,...l}=e;o(n)&&"function"==typeof i&&(n=i(n._payload));let c=t.Children.toArray(n),u=c.find(d);if(u){let e=u.props.children,n=c.map(r=>r!==u?r:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,a.jsx)(s,{...l,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,n):null})}return(0,a.jsx)(s,{...l,ref:r,children:n})});return c.displayName=`${e}.Slot`,c}var s=l("Slot"),c=Symbol("radix.slottable");function d(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}e.s(["Slot",()=>s,"createSlot",()=>l])},77732,e=>{"use strict";var t=e.i(20128),r=e.i(69087);let a=(0,t.create)()((0,r.persist)(e=>({loadImages:!0,aiModel:"gemini-3-flash-preview",toggleLoadImages:()=>e(e=>({loadImages:!e.loadImages})),setLoadImages:t=>e({loadImages:t}),setAiModel:t=>e({aiModel:t}),guideViewMode:"swipe",setGuideViewMode:t=>e({guideViewMode:t})}),{name:"settings-storage"}));e.s(["useSettingsStore",0,a])},50812,e=>{"use strict";let t=(0,e.i(98631).default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>t],50812)},13862,e=>{"use strict";let t=(0,e.i(98631).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],13862)},97106,e=>{"use strict";var t=e.i(71111);let r=(0,t.createServerReference)("702b3df265775fcbe32768e33e775928abf26fd690",t.callServer,void 0,t.findSourceMapURL,"getArticlesAction");e.s(["getArticlesAction",()=>r])},16024,82219,28450,e=>{"use strict";let t=(0,e.i(98631).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],16024);var r=e.i(66634),a=e.i(85069);function n(e,t=[]){let i=[],o=()=>{let t=i.map(e=>r.createContext(e));return function(a){let n=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:n}}),[a,n])}};return o.scopeName=e,[function(t,n){let o=r.createContext(n);o.displayName=t+"Context";let l=i.length;i=[...i,n];let s=t=>{let{scope:n,children:i,...s}=t,c=n?.[e]?.[l]||o,d=r.useMemo(()=>s,Object.values(s));return(0,a.jsx)(c.Provider,{value:d,children:i})};return s.displayName=t+"Provider",[s,function(a,i){let s=i?.[e]?.[l]||o,c=r.useContext(s);if(c)return c;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=a.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return a.scopeName=t.scopeName,a}(o,...t)]}e.s(["createContextScope",()=>n],82219),e.i(48759);var i=e.i(44095),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let n=(0,i.createSlot)(`Primitive.${t}`),o=r.forwardRef((e,r)=>{let{asChild:i,...o}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(i?n:t,{...o,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});e.s(["Primitive",()=>o],28450)},7983,(e,t,r)=>{"use strict";var a=e.r(66634),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,o=a.useEffect,l=a.useLayoutEffect,s=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var d="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=i({inst:{value:r,getSnapshot:t}}),n=a[0].inst,d=a[1];return l(function(){n.value=r,n.getSnapshot=t,c(n)&&d({inst:n})},[e,r,t]),o(function(){return c(n)&&d({inst:n}),e(function(){c(n)&&d({inst:n})})},[e]),s(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},33347,(e,t,r)=>{"use strict";t.exports=e.r(7983)},99676,e=>{"use strict";var t=e.i(85069),r=e.i(66634),a=e.i(82219),n=e.i(75161),i=e.i(97521),o=e.i(28450),l=e.i(33347);function s(){return()=>{}}var c="Avatar",[d,u]=(0,a.createContextScope)(c),[f,g]=d(c),h=r.forwardRef((e,a)=>{let{__scopeAvatar:n,...i}=e,[l,s]=r.useState("idle");return(0,t.jsx)(f,{scope:n,imageLoadingStatus:l,onImageLoadingStatusChange:s,children:(0,t.jsx)(o.Primitive.span,{...i,ref:a})})});h.displayName=c;var p="AvatarImage",m=r.forwardRef((e,a)=>{let{__scopeAvatar:c,src:d,onLoadingStatusChange:u=()=>{},...f}=e,h=g(p,c),m=function(e,{referrerPolicy:t,crossOrigin:a}){let n=(0,l.useSyncExternalStore)(s,()=>!0,()=>!1),o=r.useRef(null),c=n?(o.current||(o.current=new window.Image),o.current):null,[d,u]=r.useState(()=>v(c,e));return(0,i.useLayoutEffect)(()=>{u(v(c,e))},[c,e]),(0,i.useLayoutEffect)(()=>{let e=e=>()=>{u(e)};if(!c)return;let r=e("loaded"),n=e("error");return c.addEventListener("load",r),c.addEventListener("error",n),t&&(c.referrerPolicy=t),"string"==typeof a&&(c.crossOrigin=a),()=>{c.removeEventListener("load",r),c.removeEventListener("error",n)}},[c,a,t]),d}(d,f),y=(0,n.useCallbackRef)(e=>{u(e),h.onImageLoadingStatusChange(e)});return(0,i.useLayoutEffect)(()=>{"idle"!==m&&y(m)},[m,y]),"loaded"===m?(0,t.jsx)(o.Primitive.img,{...f,ref:a,src:d}):null});m.displayName=p;var y="AvatarFallback",x=r.forwardRef((e,a)=>{let{__scopeAvatar:n,delayMs:i,...l}=e,s=g(y,n),[c,d]=r.useState(void 0===i);return r.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>d(!0),i);return()=>window.clearTimeout(e)}},[i]),c&&"loaded"!==s.imageLoadingStatus?(0,t.jsx)(o.Primitive.span,{...l,ref:a}):null});function v(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}x.displayName=y;var b=e.i(31924);function w({className:e,...r}){return(0,t.jsx)(h,{"data-slot":"avatar",className:(0,b.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...r})}function S({className:e,...r}){return(0,t.jsx)(m,{"data-slot":"avatar-image",className:(0,b.cn)("aspect-square size-full",e),...r})}function k({className:e,...r}){return(0,t.jsx)(x,{"data-slot":"avatar-fallback",className:(0,b.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...r})}e.s(["Avatar",()=>w,"AvatarFallback",()=>k,"AvatarImage",()=>S],99676)},18807,e=>{"use strict";var t=e.i(20128),r=e.i(97106),a=e.i(71111);let n=(0,a.createServerReference)("005ccf390b6e23c7255756b0a7e0d37331b55121cc",a.callServer,void 0,a.findSourceMapURL,"getTopicsAction"),i=(0,a.createServerReference)("00e06b922e35a170413f6e5fba30bbbc392ca5f6db",a.callServer,void 0,a.findSourceMapURL,"getUserProfileAction"),o=(0,t.create)((e,t)=>({user:null,topics:[],articles:[],activeTopicId:"all",isLoading:!1,page:1,hasMore:!0,fetchInitialData:async()=>{e({isLoading:!0,page:1,hasMore:!0});try{let[t,a,o]=await Promise.all([i(),n(),(0,r.getArticlesAction)(void 0,1,10)]),l=o.length>=10;e({user:t,topics:a,articles:o,isLoading:!1,hasMore:l,page:1})}catch(t){console.error("Failed to fetch home data:",t),e({isLoading:!1})}},loadMoreArticles:async()=>{let{page:a,activeTopicId:n,isLoading:i,hasMore:o}=t();if(!i&&o){e({isLoading:!0});try{let t=a+1,i=await (0,r.getArticlesAction)("all"===n?void 0:n,t,10);i.length<10&&e({hasMore:!1}),e(e=>{let r=[...e.articles,...i];return{articles:Array.from(new Map(r.map(e=>[e.id,e])).values()),page:t,isLoading:!1}})}catch(t){console.error("Failed to load more articles:",t),e({isLoading:!1})}}},setActiveTopic:async t=>{e({activeTopicId:t,isLoading:!0,page:1,hasMore:!0,articles:[]});try{let a=await (0,r.getArticlesAction)("all"===t?void 0:t,1,10),n=a.length>=10;e({articles:a,isLoading:!1,hasMore:n})}catch(t){console.error("Failed to update topic:",t),e({isLoading:!1})}}}));e.s(["useHomeStore",0,o],18807)},65650,e=>{"use strict";var t=e.i(85069),r=e.i(66634),a=e.i(1508),n=e.i(6891),i=e.i(20128),o=e.i(69087),l=e.i(71111);let s=(0,l.createServerReference)("0063e7f07d247300df89f6174516d064a41a9d243e",l.callServer,void 0,l.findSourceMapURL,"getInsights"),c=(0,l.createServerReference)("78966924308e3f1288dff8e4770fa6eabcad8c3d76",l.callServer,void 0,l.findSourceMapURL,"addInsight"),d=(0,l.createServerReference)("406b12c28d4497aad59fc4127d9d2a4c33625e8dd5",l.callServer,void 0,l.findSourceMapURL,"deleteInsight"),u=(0,i.create)()((0,o.persist)((e,t)=>({insights:[],currentIndex:0,isLoading:!1,error:null,activeCategory:"all",fetchInsights:async()=>{e({isLoading:!0,error:null});try{let t=await s();e({insights:t,isLoading:!1})}catch(t){e({error:t.message,isLoading:!1})}},addInsight:async(t,r,a,n)=>{e({isLoading:!0,error:null});try{let i=await c(t,r,a,n);i.success&&i.insight?e(e=>({insights:[...e.insights,i.insight],isLoading:!1})):e({error:i.error||"Failed to add insight",isLoading:!1})}catch(t){e({error:t.message,isLoading:!1})}},deleteInsight:async t=>{e({isLoading:!0,error:null});try{let r=await d(t);r.success?e(e=>{let r=e.insights.filter(e=>e.id!==t),a=e.currentIndex;return a>=r.length&&r.length>0?a=r.length-1:0===r.length&&(a=0),{insights:r,currentIndex:a,isLoading:!1}}):e({error:r.error||"Failed to delete insight",isLoading:!1})}catch(t){e({error:t.message,isLoading:!1})}},setCurrentIndex:t=>e({currentIndex:t}),setActiveCategory:t=>e({activeCategory:t,currentIndex:0}),getFilteredInsights:()=>{let{insights:e,activeCategory:r}=t();return"all"===r?e:"favorites"===r?e.filter(e=>1===e.articleFavorite):e.filter(e=>e.category===r)}}),{name:"guide-storage"}));var f=e.i(77732),g=e.i(72169),h=e.i(81756),p=e.i(50812),m=e.i(14136),y=e.i(23714),x=e.i(86914),v=e.i(31924),b=e.i(56005);function w({insights:e,currentIndex:r,setCurrentIndex:n,onDelete:i,currentInsight:o,hasInsights:l}){let{toast:s}=(0,b.useToast)();if(!l||!o)return null;let c=async()=>{if(!o)return;let e=o.articleSubtitle||o.articleTitle||o.title,t=`【${e}】

${o.content}

--- 来自 B-Zhihu AI 阅读助手`;try{await navigator.clipboard.writeText(t),s({title:"卡片内容已复制",description:"卡片标题与正文已保存到剪贴板。",duration:2e3})}catch(e){console.error("Failed to copy:",e),s({variant:"destructive",title:"复制失败",description:"请检查浏览器权限。"})}};return(0,t.jsxs)("main",{className:"flex-1 flex flex-col p-6 pb-32 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsxs)("div",{className:"absolute inset-0 bg-white dark:bg-[#1a181b] rounded-3xl shadow-2xl border border-gray-100 dark:border-white/5 overflow-hidden flex flex-col transition-all duration-500 ease-out",children:[(0,t.jsx)("div",{className:"h-2 w-full bg-gradient-to-r from-[#2a7e7e] to-[#4c2e6b] opacity-80"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden relative flex flex-col p-8 sm:p-10",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Compass,{className:(0,v.cn)("w-5 h-5","Thinking"===o.category&&"text-blue-500","Insight"===o.category&&"text-purple-500",(!o.category||"Thinking"!==o.category&&"Insight"!==o.category)&&"text-gray-400")}),(0,t.jsx)("span",{className:(0,v.cn)("text-xs font-bold uppercase tracking-widest","Thinking"===o.category&&"text-blue-500","Insight"===o.category&&"text-purple-500",(!o.category||"Thinking"!==o.category&&"Insight"!==o.category)&&"text-gray-400"),children:o.category||"INSIGHT"})]}),(0,t.jsxs)("span",{className:"text-xs font-mono text-gray-300 dark:text-gray-600",children:[r+1," / ",e.length]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-start min-h-0",children:[(0,t.jsx)("h3",{className:"text-xl sm:text-2xl font-serif font-bold leading-tight tracking-tight text-[#101818] dark:text-white mb-6 shrink-0",children:o.articleSubtitle||o.articleTitle||o.title}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto no-scrollbar min-h-0",children:(0,t.jsx)("p",{className:"text-base sm:text-lg leading-relaxed text-gray-600 dark:text-gray-300 font-sans font-normal",children:o.content})})]}),(0,t.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-50 dark:border-gray-700/50 flex flex-col gap-2",children:[o.articleTitle&&(0,t.jsxs)(h.default,{href:`/article/${o.articleUuid}`,className:"text-xs text-gray-400 dark:text-gray-500 line-clamp-1 italic hover:text-[#2a7e7e] transition-colors hover:underline",children:["From: ",o.articleTitle]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-gray-300 dark:text-gray-600",children:[(0,t.jsx)("span",{className:"text-[10px] uppercase tracking-widest",children:o.createdAt?new Date(o.createdAt).toLocaleDateString():"Just now"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{className:"hover:text-red-400 transition-colors",onClick:()=>i(o.id),children:(0,t.jsx)(m.Trash2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:c,className:"hover:text-[#2a7e7e] transition-colors",children:(0,t.jsx)(p.Share2,{className:"w-4 h-4"})})]})]})]})]})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-8 px-4",children:[(0,t.jsx)("button",{onClick:()=>{r>0&&n(r-1)},disabled:0===r,className:"p-4 rounded-full bg-white dark:bg-[#221f24] shadow-lg text-[#101818] dark:text-white disabled:opacity-30 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-white/5 transition-all active:scale-95 border border-transparent dark:border-white/5",children:(0,t.jsx)(y.ChevronLeft,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-gray-300 dark:text-gray-600 mb-1",children:"Swipe"}),(0,t.jsx)("div",{className:"w-12 h-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-[#101818] dark:bg-white transition-all duration-300 ease-out",style:{width:`${(r+1)/e.length*100}%`}})})]}),(0,t.jsx)("button",{onClick:()=>{r<e.length-1&&n(r+1)},disabled:r===e.length-1,className:"p-4 rounded-full bg-[#101818] dark:bg-white shadow-lg text-white dark:text-[#101818] disabled:opacity-30 disabled:cursor-not-allowed hover:opacity-90 transition-all active:scale-95",children:(0,t.jsx)(x.ChevronRight,{className:"w-6 h-6"})})]})]})}var S=e.i(13862);function k({insights:e,onDelete:r}){return(0,t.jsx)("div",{className:"flex-1 overflow-y-auto no-scrollbar px-5 pb-28 pt-2",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)("article",{className:"relative w-full flex flex-col bg-white dark:bg-gray-800 rounded-xl shadow-[0_4px_20px_-5px_rgba(0,0,0,0.05)] border border-gray-100 dark:border-gray-700 p-6",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),confirm("Delete this insight?")&&r(e.id)},className:"absolute top-5 right-5 text-gray-300 dark:text-gray-600 hover:text-red-400 transition-colors z-10",children:(0,t.jsx)(m.Trash2,{className:"w-5 h-5 stroke-[1.5px]"})}),(0,t.jsxs)("div",{className:"mb-3 pr-8 flex items-center gap-2",children:[(0,t.jsx)(a.Compass,{className:(0,v.cn)("w-4 h-4","Thinking"===e.category&&"text-blue-500","Insight"===e.category&&"text-purple-500",(!e.category||"Thinking"!==e.category&&"Insight"!==e.category)&&"text-gray-400")}),(0,t.jsx)("span",{className:(0,v.cn)("text-[10px] font-bold uppercase tracking-widest","Thinking"===e.category&&"text-blue-500","Insight"===e.category&&"text-purple-500",(!e.category||"Thinking"!==e.category&&"Insight"!==e.category)&&"text-gray-400"),children:e.category||"INSIGHT"})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-start max-h-48 overflow-y-auto custom-scrollbar",children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-serif font-bold leading-tight tracking-tight text-[#101818] dark:text-white mb-3",children:e.articleSubtitle||e.articleTitle||e.title}),(0,t.jsx)("p",{className:"text-sm sm:text-base leading-relaxed text-gray-600 dark:text-gray-300 font-sans font-normal",children:e.content})]}),(0,t.jsxs)(h.default,{href:`/article/${e.articleUuid}`,className:"mt-5 pt-4 border-t border-gray-50 dark:border-gray-700/50 flex items-center justify-between group cursor-pointer",children:[(0,t.jsx)("span",{className:"text-[10px] font-sans font-bold text-[#2a7e7e] uppercase tracking-wider group-hover:underline",children:e.articleTitle?"Source":"Insight"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] font-sans text-gray-400 dark:text-gray-500 group-hover:text-[#2a7e7e] transition-colors",children:[(0,t.jsx)(S.Clock,{className:"w-3.5 h-3.5"}),(0,t.jsxs)("span",{children:[Math.max(1,Math.ceil(e.content.length/500))," min"]})]})]})]},e.id))})})}var j=e.i(16024),N=e.i(99676),C=e.i(18807);function I(){let{user:e}=(0,C.useHomeStore)(),r=(0,n.useTranslation)();return(0,t.jsx)("header",{className:"sticky top-0 z-40 bg-white/90 dark:bg-[#0a0a0a]/90 backdrop-blur-md transition-all duration-300 border-b border-transparent dark:border-white/5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 pt-8 pb-4",children:[(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("h1",{className:"text-3xl font-serif font-bold leading-tight tracking-tight text-[#101818] dark:text-white",children:r.guide.title})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(h.default,{href:"/search",className:"flex items-center justify-center h-10 w-10 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 transition-colors text-slate-900 dark:text-white cursor-pointer",children:(0,t.jsx)(j.Search,{className:"w-[26px] h-[26px]",strokeWidth:2})}),(0,t.jsx)("div",{className:"h-9 w-9 overflow-hidden rounded-full ring-2 ring-white dark:ring-white/10 shadow-sm cursor-pointer",children:(0,t.jsxs)(N.Avatar,{className:"h-full w-full",children:[(0,t.jsx)(N.AvatarImage,{src:e?.avatarUrl,className:"object-cover"}),(0,t.jsx)(N.AvatarFallback,{children:e?.name?.[0]||"U"})]})})]})]})})}function A(){let{activeCategory:e,setActiveCategory:r}=u(),a=(0,n.useTranslation)(),i=[{id:"all",label:a.guide.filterAll},{id:"Thinking",label:a.guide.filterThinking},{id:"Insight",label:a.guide.filterInsight},{id:"favorites",label:a.guide.filterFavorites}];return(0,t.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar pl-6 py-4 space-x-3 whitespace-nowrap bg-white dark:bg-[#0a0a0a] z-30",children:i.map(a=>{let n=a.id===e;return(0,t.jsx)("button",{onClick:()=>r(a.id),className:(0,v.cn)("inline-flex items-center justify-center px-5 py-2 rounded-full text-sm font-bold transition-all cursor-pointer",n?"bg-primary text-white shadow-[0_4px_20px_-2px_rgba(0,0,0,0.05)] hover:shadow-[0_10px_25px_-3px_rgba(46,106,122,0.1)]":"bg-white dark:bg-[var(--surface-dark)] border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 font-semibold hover:border-primary/50 hover:text-primary"),children:a.label},a.id)})})}function T(){let e=(0,n.useTranslation)(),{fetchInsights:i,getFilteredInsights:o,deleteInsight:l,currentIndex:s,setCurrentIndex:c,isLoading:d}=u(),{guideViewMode:h}=(0,f.useSettingsStore)();(0,r.useEffect)(()=>{i()},[i]);let p=o(),m=p[s],y=p.length>0;return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-white dark:bg-[#0a0a0a] overflow-hidden font-sans text-[#141118] dark:text-gray-100 transition-colors duration-300",children:[(0,t.jsxs)("div",{className:"w-full md:max-w-2xl lg:max-w-5xl xl:max-w-7xl mx-auto flex flex-col relative bg-white dark:bg-[#0a0a0a] border-x border-slate-100 dark:border-white/5 min-h-screen overflow-hidden",children:[(0,t.jsx)(I,{}),(0,t.jsx)(A,{}),d?(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"Loading..."}):y?"feed"===h?(0,t.jsx)(k,{insights:p,onDelete:l}):(0,t.jsx)(w,{insights:p,currentIndex:s,setCurrentIndex:c,onDelete:l,currentInsight:m,hasInsights:y}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 p-8 text-center",children:[(0,t.jsx)(a.Compass,{className:"w-12 h-12 mb-4 opacity-20"}),(0,t.jsx)("p",{className:"text-lg font-light",children:e.guide.noInsights})]})]}),(0,t.jsx)(g.BottomNavbar,{})]})}e.s(["default",()=>T],65650)}]);