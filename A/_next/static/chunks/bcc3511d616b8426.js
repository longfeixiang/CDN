(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53100,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return l},searchParamsToUrlQuery:function(){return i},urlQueryToSearchParams:function(){return s}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});function i(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function s(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,o(e));else t.set(r,o(a));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},86482,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return s},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(44066)._(e.r(53100)),o=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,a=e.protocol||"",n=e.pathname||"",s=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(i.urlQueryToSearchParams(l)));let d=e.search||l&&`?${l}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||o.test(a))&&!1!==c?(c="//"+(c||""),n&&"/"!==n[0]&&(n="/"+n)):c||(c=""),s&&"#"!==s[0]&&(s="#"+s),d&&"?"!==d[0]&&(d="?"+d),n=n.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${n}${d}${s}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return s(e)}},75,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return b},NormalizeError:function(){return v},PageNotFoundError:function(){return x},SP:function(){return g},ST:function(){return h},WEB_VITALS:function(){return i},execOnce:function(){return o},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return N}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>s.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&f(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let g="u">typeof performance,h=g&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class v extends Error{}class x extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},59664,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return i}});let a=e.r(75),n=e.r(74240);function i(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},63217,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},81756,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return y},useLinkStatus:function(){return x}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(44066),o=e.r(85069),s=i._(e.r(66634)),l=e.r(86482),c=e.r(92116),d=e.r(7705),u=e.r(75),f=e.r(87483);e.r(8943);let p=e.r(79407),m=e.r(59664),g=e.r(21869);function h(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function y(t){var r;let a,n,i,[l,y]=(0,s.useOptimistic)(p.IDLE_LINK_STATUS),x=(0,s.useRef)(null),{href:b,as:j,children:N,prefetch:w=null,passHref:C,replace:S,shallow:A,scroll:k,onClick:D,onMouseEnter:T,onTouchStart:M,legacyBehavior:R=!1,onNavigate:E,ref:P,unstable_dynamicOnHover:O,...I}=t;a=N,R&&("string"==typeof a||"number"==typeof a)&&(a=(0,o.jsx)("a",{children:a}));let L=s.default.useContext(c.AppRouterContext),F=!1!==w,B=!1!==w?null===(r=w)||"auto"===r?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:_,as:U}=s.default.useMemo(()=>{let e=h(b);return{href:e,as:j?h(j):e}},[b,j]);if(R){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=s.default.Children.only(a)}let $=R?n&&"object"==typeof n&&n.ref:P,z=s.default.useCallback(e=>(null!==L&&(x.current=(0,p.mountLinkInstance)(e,_,L,B,F,y)),()=>{x.current&&((0,p.unmountLinkForCurrentNavigation)(x.current),x.current=null),(0,p.unmountPrefetchableInstance)(e)}),[F,_,L,B,y]),H={ref:(0,d.useMergedRef)(z,$),onClick(t){R||"function"!=typeof D||D(t),R&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!L||t.defaultPrevented||function(t,r,a,n,i,o,l){if("u">typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){i&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(56823);s.default.startTransition(()=>{u(a||r,i?"replace":"push",o??!0,n.current)})}}(t,_,U,x,S,k,E)},onMouseEnter(e){R||"function"!=typeof T||T(e),R&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),L&&F&&(0,p.onNavigationIntent)(e.currentTarget,!0===O)},onTouchStart:function(e){R||"function"!=typeof M||M(e),R&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),L&&F&&(0,p.onNavigationIntent)(e.currentTarget,!0===O)}};return(0,u.isAbsoluteUrl)(U)?H.href=U:R&&!C&&("a"!==n.type||"href"in n.props)||(H.href=(0,f.addBasePath)(U)),i=R?s.default.cloneElement(n,H):(0,o.jsx)("a",{...I,...H,children:a}),(0,o.jsx)(v.Provider,{value:l,children:i})}e.r(63217);let v=(0,s.createContext)(p.IDLE_LINK_STATUS),x=()=>(0,s.useContext)(v);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},8943,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},7705,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=e.r(66634);function n(e,t){let r=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=i(e,a)),t&&(n.current=i(t,a))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},30438,e=>{e.v({nav:{home:"HOME",library:"LIBRARY",guide:"GUIDE",profile:"PROFILE"},home:{todaysRead:"Today's Read",mustRead:"MUST READ",selectedForYou:"SELECTED FOR YOU",contentTypes:{all:"All",tutorial:"Tutorial",concept:"Concept",narrative:"Narrative",opinion:"Opinion",news:"News",resource:"Resource",collection:"Collection",pin:"Pin",favorite:"Favorite",answer:"Answer",article:"Article"}},search:{placeholder:"Search topics, articles...",discovery:"Discovery",recent:"RECENT",clearAll:"CLEAR ALL",resultsFor:"Results for",noResults:"No results found.",searching:"Searching...",trending:"Trending Now",filters:{title:"Filters",sortBy:"Sort By",category:"Category",all:"All",reset:"Reset all filters",articles:"Articles",sortOptions:{relevance:"Recommended",newest:"Newest",oldest:"Oldest"}}},library:{title:"Library",subtitle:"Curated Collections",seeAll:"See All",empty:"No collections found.",seedHint:"Run 'pnpm seed' to populate data.",updated:"Updated",books:"Books",syncTitle:"Pull books from OPDS",syncStatus:"Sync Status",syncRunning:"Syncing Library",syncSuccess:"Sync Complete",syncError:"Sync Failed",initializing:"Initializing...",preparing:"Preparing...",foundBooks:"Found {count} books",importing:"Importing: {title}",syncCompleteCount:"Sync complete. Imported {count} new books",noBooksFound:"No books found",search:"Search Collections",searchPlaceholder:"Enter collection name...",createNew:"Create New",editCollection:"Edit Collection",deleteCollection:"Delete Collection",deleteConfirm:"Are you sure you want to delete this collection? Books will not be deleted.",collectionName:"Collection Name",enterName:"Enter collection name",sortBy:"Sort",sortByName:"By Name",sortByDate:"By Date",sortByCustom:"Custom Order",addToCollection:"Add to Collection",removeFromCollection:"Remove from Collection"},profile:{title:"Profile",settings:"Settings",appearance:"Appearance",preferences:"Preferences",language:"Language",theme:"Theme",logOut:"Log Out",readingHistory:"Reading History",chatHistory:"Chat History",view:"VIEW",dataManagement:{title:"Data Management",history:"History",articles:"Articles",chats:"AI Chats",insights:"Insights",library:"Library Data",confirmTitle:"Delete {label}?",confirmDesc:"Are you sure you want to delete all {label}?",deleteWarning:"⚠️ Warning: This action will permanently delete all data and cannot be recovered!",deleteError:"Failed to delete data",deleteSuccess:"Successfully deleted {label}",confirmButton:"Confirm Delete",cancelButton:"Cancel",note:"Note: Deleting data is a permanent action. Once you delete a category, all associated content and preferences will be permanently removed from your device.",threads:"threads"},promptEditor:"Prompt Editor",importData:"Import Data",appSettings:"App Settings",help:"Help & Support",items:"items",articlesRead:"Articles read",wordCount:"Word count",contributionGraph:{title:"Reading Contributions",noData:"No reading data found",weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],totalCount:"{{count}} articles"}},settings:{title:"Settings",appearance:"Appearance",preferences:"Preferences",application:"Application",theme:"Theme",typography:"Typography",notifications:"Notifications",privacy:"Privacy & Security",about:"About",licenses:"Licenses",opds:"OPDS Server",opdsSubtitle:"Connect to external catalogs",connect:"Connect",serverUrl:"Server URL",username:"Username",password:"Password",language:"Language",loadImages:"Load Images",loadImagesSub:"Toggle image loading to save data",aiModel:"AI Model",selectModel:"Select Gemini Model",guideViewMode:{title:"Guide View Mode",swipe:"Swipe Card",feed:"Vertical Feed"}},auth:{welcome:"Welcome back",enter:"Enter",identityAccess:"Identity Access",passphrasePlaceholder:"Enter your passphrase...",loginFailed:"Login failed"},guide:{title:"Guide",progress:"Progress","3minRead":"3 min read",insight:"Insight",noInsights:"No insights found yet.",deleteConfirm:"Delete this insight?",filterAll:"All",filterThinking:"Thinking",filterInsight:"Insight",filterFavorites:"Favorites"},article:{notFound:"Article not found.",goHome:"Go Home",editTags:"Edit Tags",addTag:"Add a new tag...",editTagsDescription:"Edit article tags",summary:"SUMMARY",thinking:"THINKING",aiInsight:{title:"AI Insight Generation",label:"What are you looking for? (Optional)",placeholder:"E.g., Summarize key points, List all tools mentioned...",generating:"Generating...",generate:"Generate"},share:"Share Article",delete:"Delete Article",deleteConfirm:"Are you sure you want to permanently delete this article? This action cannot be undone.",deleteAiChat:"Delete AI Chat",deleteAiChatConfirm:"Are you sure you want to delete the AI chat history for this article?"},common:{save:"Save Changes",cancel:"Cancel",confirm:"Confirm",loading:"Loading..."},promptEditor:{title:"Gemini Prompt",saveChanges:"Save Changes",close:"Close",placeholder:"Start typing your prompt here... use Markdown for structure.",saveSuccess:"Prompt saved successfully",saveError:"Failed to save prompt",restoreDefaults:"Restore Defaults",unsavedChangesTitle:"Unsaved Changes",unsavedChangesDescription:"You have unsaved changes. If you leave, your changes will be lost.",leave:"Leave",stay:"Stay"}})},89778,e=>{e.v({nav:{home:"首页",library:"书馆",guide:"洞察",profile:"我的"},home:{todaysRead:"今日阅读",mustRead:"必读推荐",selectedForYou:"精选内容",contentTypes:{all:"全部",tutorial:"实操教程",concept:"深度解析",narrative:"叙事经历",opinion:"观点评论",news:"资讯快报",resource:"素材资源",collection:"清单合集",pin:"想法",favorite:"收藏",answer:"答案",article:"文章"}},search:{placeholder:"搜索话题、文章...",discovery:"发现",recent:"最近搜索",clearAll:"清除全部",resultsFor:"搜索结果：",noResults:"未找到相关结果",searching:"搜索中...",trending:"热门话题",filters:{title:"筛选",sortBy:"排序方式",category:"分类",all:"全部",reset:"重置所有筛选",articles:"篇文章",sortOptions:{relevance:"推荐",newest:"最新发布",oldest:"最早发布"}}},library:{title:"藏书馆",subtitle:"精选书单",seeAll:"查看全部",empty:"暂无书单",seedHint:"请运行 'pnpm seed' 生成数据",updated:"更新于",books:"本书",syncTitle:"从 OPDS 拉取图书",syncStatus:"同步状态",syncRunning:"正在同步藏书馆",syncSuccess:"同步完成",syncError:"同步失败",initializing:"正在初始化...",preparing:"准备中...",foundBooks:"已找到 {count} 本书",importing:"正在导入: {title}",syncCompleteCount:"同步完成，已导入 {count} 本新书",noBooksFound:"未找到任何书籍",search:"搜索书单",searchPlaceholder:"输入书单名称...",createNew:"新建书单",editCollection:"编辑书单",deleteCollection:"删除书单",deleteConfirm:"确定要删除此书单吗？书单中的书籍不会被删除。",collectionName:"书单名称",enterName:"请输入书单名称",sortBy:"排序",sortByName:"按名称",sortByDate:"按创建时间",sortByCustom:"自定义顺序",addToCollection:"添加到书单",removeFromCollection:"从书单移除"},profile:{title:"个人中心",settings:"设置",appearance:"外观",preferences:"偏好",language:"语言",theme:"主题",logOut:"退出登录",readingHistory:"阅读历史",chatHistory:"对话历史",view:"查看",dataManagement:{title:"数据管理",history:"历史记录",articles:"文章数据",chats:"AI 对话",insights:"洞察数据",library:"藏书馆数据",confirmTitle:"删除 {label}？",confirmDesc:"您确定要删除所有 {label} 吗？",deleteWarning:"⚠️ 警告：此操作将永久删除所有数据，无法恢复！",deleteError:"删除数据失败",deleteSuccess:"已成功删除 {label}",confirmButton:"确认删除",cancelButton:"取消",note:"注意：删除数据是永久性操作。一旦删除某个类别，所有相关内容和设置将从您的设备中永久移除。",threads:"条对话"},promptEditor:"提示词编辑器",importData:"导入数据",appSettings:"应用设置",help:"帮助与支持",items:"项",articlesRead:"已读文章",wordCount:"阅读字数",contributionGraph:{title:"阅读贡献",noData:"暂无阅读数据",weekdays:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],totalCount:"{{count}} 篇文章"}},settings:{title:"设置",appearance:"外观",preferences:"偏好设置",application:"应用程序",theme:"主题",typography:"排版",notifications:"通知",privacy:"隐私与安全",about:"关于",licenses:"开源许可",opds:"OPDS 服务器",opdsSubtitle:"连接外部目录",connect:"连接",serverUrl:"服务器地址",username:"用户名",password:"密码",language:"语言",loadImages:"加载图片",loadImagesSub:"开启图片加载以节省流量",aiModel:"AI 模型",selectModel:"选择生成模型",guideViewMode:{title:"阅读试图模式",swipe:"卡片翻阅",feed:"垂直信息流"}},auth:{welcome:"欢迎回来",enter:"进入",identityAccess:"身份验证",passphrasePlaceholder:"请输入您的口令短语...",loginFailed:"登录失败"},guide:{title:"深度洞察",progress:"进度","3minRead":"3 分钟阅读",insight:"洞察",noInsights:"暂无洞察内容。",deleteConfirm:"确定删除此洞察？",filterAll:"全部",filterThinking:"思考",filterInsight:"洞察",filterFavorites:"收藏"},article:{notFound:"未找到文章。",goHome:"返回首页",editTags:"编辑标签",addTag:"添加新标签...",editTagsDescription:"编辑文章标签",summary:"摘要",thinking:"思考",aiInsight:{title:"AI 洞察生成",label:"您想了解什么？（可选）",placeholder:"例如：总结关键点，列出所有提及的工具...",generating:"正在生成...",generate:"生成"},share:"分享文章",delete:"删除文章",deleteConfirm:"您确定要永久删除这篇文章吗？此操作无法撤销。",deleteAiChat:"删除 AI 对话",deleteAiChatConfirm:"您确定要删除此文章的 AI 对话历史吗？"},common:{save:"保存更改",cancel:"取消",confirm:"确认",loading:"加载中..."},promptEditor:{title:"Gemini 提示词",saveChanges:"保存更改",close:"关闭",placeholder:"在此输入您的提示词... 支持 Markdown 结构。",saveSuccess:"提示词已成功保存",saveError:"保存提示词失败",restoreDefaults:"恢复默认",unsavedChangesTitle:"未保存的更改",unsavedChangesDescription:"您有未保存的更改。如果您离开，这些更改将丢失。",leave:"离开",stay:"留下"}})},71111,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return i.callServer},createServerReference:function(){return s.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(61547),o=e.r(55313),s=e.r(81553)},20128,e=>{"use strict";var t=e.i(66634);let r=e=>{let t,r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,i={setState:a,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,n,i);return i},a=e=>{let a=e?r(e):r,n=e=>(function(e,r=e=>e){let a=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>r(e.getState()),[e,r]),t.default.useCallback(()=>r(e.getInitialState()),[e,r]));return t.default.useDebugValue(a),a})(a,e);return Object.assign(n,a),n},n=e=>e?a(e):a;e.s(["create",()=>n],20128)},6891,69087,98183,e=>{"use strict";var t=e.i(20128);let r=e=>t=>{try{let a=e(t);if(a instanceof Promise)return a;return{then:e=>r(e)(a),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>r(t)(e)}}},a=(e,t)=>(a,n,i)=>{let o,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,c=0,d=new Set,u=new Set,f=s.storage;if(!f)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),a(...e)},n,i);let p=()=>{let e=s.partialize({...n()});return f.setItem(s.name,{state:e,version:s.version})},m=i.setState;i.setState=(e,t)=>(m(e,t),p());let g=e((...e)=>(a(...e),p()),n,i);i.getInitialState=()=>g;let h=()=>{var e,t;if(!f)return;let i=++c;l=!1,d.forEach(e=>{var t;return e(null!=(t=n())?t:g)});let m=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=n())?e:g))||void 0;return r(f.getItem.bind(f))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;if(i!==c)return;let[r,l]=e;if(a(o=s.merge(l,null!=(t=n())?t:g),!0),r)return p()}).then(()=>{i===c&&(null==m||m(o,void 0),o=n(),l=!0,u.forEach(e=>e(o)))}).catch(e=>{i===c&&(null==m||m(void 0,e))})};return i.persist={setOptions:e=>{s={...s,...e},e.storage&&(f=e.storage)},clearStorage:()=>{null==f||f.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>h(),hasHydrated:()=>l,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},s.skipHydration||h(),o||g};e.s(["persist",()=>a],69087);let n=(0,t.create)()(a(e=>({lang:"en",setLang:t=>{e({lang:t}),document.cookie=`NEXT_LOCALE=${t}; path=/; max-age=31536000; SameSite=Lax`}}),{name:"lang-storage"}));e.s(["useLangStore",0,n],98183);var i=e.i(30438),o=e.i(89778);let s={en:i.default,zh:o.default};function l(){let{lang:e}=n();return s[e]}e.s(["useTranslation",()=>l],6891)},23714,e=>{"use strict";let t=(0,e.i(98631).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],23714)},14136,e=>{"use strict";let t=(0,e.i(98631).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],14136)},68499,e=>{"use strict";var t=e.i(85069),r=e.i(66634),a=e.i(26250),n=e.i(44340),i=e.i(12480),o=e.i(91967),s=e.i(87377),l="AlertDialog",[c,d]=(0,a.createContextScope)(l,[i.createDialogScope]),u=(0,i.createDialogScope)(),f=e=>{let{__scopeAlertDialog:r,...a}=e,n=u(r);return(0,t.jsx)(i.Root,{...n,...a,modal:!0})};f.displayName=l,r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,o=u(a);return(0,t.jsx)(i.Trigger,{...o,...n,ref:r})}).displayName="AlertDialogTrigger";var p=e=>{let{__scopeAlertDialog:r,...a}=e,n=u(r);return(0,t.jsx)(i.Portal,{...n,...a})};p.displayName="AlertDialogPortal";var m=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,o=u(a);return(0,t.jsx)(i.Overlay,{...o,...n,ref:r})});m.displayName="AlertDialogOverlay";var g="AlertDialogContent",[h,y]=c(g),v=(0,s.createSlottable)("AlertDialogContent"),x=r.forwardRef((e,a)=>{let{__scopeAlertDialog:s,children:l,...c}=e,d=u(s),f=r.useRef(null),p=(0,n.useComposedRefs)(a,f),m=r.useRef(null);return(0,t.jsx)(i.WarningProvider,{contentName:g,titleName:b,docsSlug:"alert-dialog",children:(0,t.jsx)(h,{scope:s,cancelRef:m,children:(0,t.jsxs)(i.Content,{role:"alertdialog",...d,...c,ref:p,onOpenAutoFocus:(0,o.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),m.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(v,{children:l}),(0,t.jsx)(k,{contentRef:f})]})})})});x.displayName=g;var b="AlertDialogTitle",j=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,o=u(a);return(0,t.jsx)(i.Title,{...o,...n,ref:r})});j.displayName=b;var N="AlertDialogDescription",w=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,o=u(a);return(0,t.jsx)(i.Description,{...o,...n,ref:r})});w.displayName=N;var C=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,o=u(a);return(0,t.jsx)(i.Close,{...o,...n,ref:r})});C.displayName="AlertDialogAction";var S="AlertDialogCancel",A=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...o}=e,{cancelRef:s}=y(S,a),l=u(a),c=(0,n.useComposedRefs)(r,s);return(0,t.jsx)(i.Close,{...l,...o,ref:c})});A.displayName=S;var k=({contentRef:e})=>{let t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${N}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},D=e.i(31924);let T=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(m,{className:(0,D.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r,ref:a}));T.displayName=m.displayName;let M=r.forwardRef(({className:e,...r},a)=>(0,t.jsxs)(p,{children:[(0,t.jsx)(T,{}),(0,t.jsx)(x,{ref:a,className:(0,D.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r})]}));M.displayName=x.displayName;let R=({className:e,...r})=>(0,t.jsx)("div",{className:(0,D.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...r});R.displayName="AlertDialogHeader";let E=({className:e,...r})=>(0,t.jsx)("div",{className:(0,D.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});E.displayName="AlertDialogFooter";let P=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(j,{ref:a,className:(0,D.cn)("text-lg font-semibold",e),...r}));P.displayName=j.displayName;let O=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(w,{ref:a,className:(0,D.cn)("text-sm text-muted-foreground",e),...r}));O.displayName=w.displayName;let I=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(C,{ref:a,className:(0,D.cn)("inline-flex h-9 items-center justify-center rounded-md bg-primary px-3 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",e),...r}));I.displayName=C.displayName;let L=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(A,{ref:a,className:(0,D.cn)("inline-flex h-9 items-center justify-center rounded-md border border-input bg-transparent px-3 text-sm font-medium shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",e),...r}));L.displayName=A.displayName,e.s(["AlertDialog",()=>f,"AlertDialogAction",()=>I,"AlertDialogCancel",()=>L,"AlertDialogContent",()=>M,"AlertDialogDescription",()=>O,"AlertDialogFooter",()=>E,"AlertDialogHeader",()=>R,"AlertDialogTitle",()=>P],68499)},88202,e=>{"use strict";var t=e.i(85069),r=e.i(66634),a=e.i(81756),n=e.i(14136),i=e.i(23714),o=e.i(71111);let s=(0,o.createServerReference)("00b04e5935f17648b9fc2f87233ccbc9942a51112d",o.callServer,void 0,o.findSourceMapURL,"getDataStatsAction"),l=(0,o.createServerReference)("4004714b41520f5650418245bae00a33562e4d9e2a",o.callServer,void 0,o.findSourceMapURL,"deleteDataCategoryAction");var c=e.i(68499),d=e.i(98631);let u=(0,d.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function f({open:e,onOpenChange:r,category:a,onConfirm:n,loading:i=!1,i18n:o}){return(0,t.jsx)(c.AlertDialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(c.AlertDialogContent,{className:"max-w-md bg-white dark:bg-[#0a0a0a] border-gray-200 dark:border-zinc-800",children:[(0,t.jsxs)(c.AlertDialogHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-50 dark:bg-red-950/30 flex items-center justify-center",children:(0,t.jsx)(u,{className:"w-5 h-5 text-red-600 dark:text-red-500"})}),(0,t.jsx)(c.AlertDialogTitle,{className:"text-xl font-serif font-bold text-black dark:text-white",children:o.confirmTitle.replace("{label}",a)})]}),(0,t.jsx)(c.AlertDialogDescription,{asChild:!0,children:(0,t.jsxs)("div",{className:"text-[15px] leading-relaxed text-gray-600 dark:text-gray-400 space-y-3",children:[(0,t.jsx)("div",{children:o.confirmDesc.replace("{label}",a)}),(0,t.jsxs)("div",{className:"font-medium text-red-600 dark:text-red-500 flex items-start gap-2",children:[(0,t.jsx)("span",{className:"flex-shrink-0 mt-0.5",children:"⚠️"}),(0,t.jsx)("span",{children:o.deleteWarning})]})]})})]}),(0,t.jsxs)(c.AlertDialogFooter,{className:"gap-2 sm:gap-2",children:[(0,t.jsx)(c.AlertDialogCancel,{disabled:i,className:"font-light text-black dark:text-white hover:bg-gray-100 dark:hover:bg-zinc-800",children:o.cancelButton}),(0,t.jsx)(c.AlertDialogAction,{onClick:e=>{e.preventDefault(),n()},disabled:i,className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700 text-white font-medium",children:i?"删除中...":o.confirmButton})]})]})})}var p=e.i(56005),m=e.i(77855),g=e.i(6891);let h=(0,d.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);function y({onSuccess:r}){let a=(0,g.useTranslation)(),{toast:n}=(0,p.useToast)(),i=async t=>{let a=t.target.files?.[0];if(!a)return;let i=new FormData;i.append("file",a);try{let t;if(a.name.endsWith(".json")){let{uploadJsonAction:r}=await e.A(32048);t=await r(i)}else{if(!a.name.endsWith(".zip"))return void n({title:"不支持的文件格式",description:"请上传 .zip 或 .json 文件",variant:"destructive"});let{uploadDocsAction:r}=await e.A(32048);t=await r(i)}t.success?(n({title:"导入成功",description:t.message}),r?.()):n({title:"导入失败",description:t.message,variant:"destructive"})}catch(e){console.error("Import error:",e),n({title:"导入错误",description:"处理文件时发生未知错误",variant:"destructive"})}finally{t.target.value=""}};return(0,t.jsxs)("div",{className:"mt-8 pt-8 border-t border-slate-100 dark:border-white/10",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-6 uppercase tracking-widest",children:a.profile.importData}),(0,t.jsxs)("div",{className:"group flex justify-between items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 p-4 -mx-4 rounded-xl transition-colors",onClick:()=>document.getElementById("docs-upload-internal")?.click(),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-base font-light tracking-tight text-black dark:text-white",children:a.profile.importData}),(0,t.jsx)("span",{className:"text-xs text-gray-400 font-light",children:"支持 .zip / .json 格式"})]}),(0,t.jsx)(h,{className:"text-gray-400 w-5 h-5 group-hover:text-black dark:group-hover:text-white transition-colors"}),(0,t.jsx)("input",{type:"file",id:"docs-upload-internal",className:"hidden",accept:".zip,.json",onChange:i})]})]})}function v(){let e=(0,g.useTranslation)(),{toast:o}=(0,p.useToast)(),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),[v,x]=(0,r.useState)({open:!1,category:null,label:""}),[b,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{let e=await s();e.success&&e.data&&d(e.data),h(!1)})()},[]);let N=(e,t)=>{x({open:!0,category:e,label:t})},w=async()=>{if(v.category){if(j(!0),(await l(v.category)).success){o({title:e.profile.dataManagement.deleteSuccess.replace("{label}",v.label),variant:"default"});let t=await s();t.success&&t.data&&d(t.data)}else o({title:e.profile.dataManagement.deleteError,variant:"destructive"});j(!1),x({open:!1,category:null,label:""})}};return(0,t.jsxs)("div",{className:"min-h-screen bg-white dark:bg-[#0a0a0a] font-sans text-black dark:text-white antialiased flex flex-col",children:[(0,t.jsx)("div",{className:"h-14 w-full"}),(0,t.jsxs)("main",{className:"flex-1 max-w-md mx-auto w-full px-8 pb-40",children:[(0,t.jsx)("div",{className:"pt-8 pb-4",children:(0,t.jsx)(a.default,{href:"/profile",className:"inline-flex items-center text-gray-400 hover:text-black dark:hover:text-white transition-colors",children:(0,t.jsx)(i.ChevronLeft,{className:"w-6 h-6",strokeWidth:2})})}),(0,t.jsx)("div",{className:"py-6 mb-12",children:(0,t.jsx)("h1",{className:"text-3xl font-serif font-bold tracking-tight",children:e.profile.dataManagement.title})}),u?(0,t.jsx)("div",{className:"text-sm text-gray-400",children:e.common.loading}):(0,t.jsxs)("div",{className:"flex flex-col space-y-10",children:[(0,t.jsxs)("div",{className:"group flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-light tracking-tight",children:e.profile.dataManagement.history}),(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsxs)("span",{className:"text-xs uppercase tracking-wider text-gray-400 font-medium",children:[c?.history?.count||0," ",e.profile.items]}),(0,t.jsx)("button",{onClick:()=>N("history",e.profile.dataManagement.history),className:"text-gray-300 hover:text-red-500 transition-colors p-2 -mr-2","aria-label":`删除${e.profile.dataManagement.history}`,children:(0,t.jsx)(n.Trash2,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"group flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-light tracking-tight",children:e.profile.dataManagement.articles}),(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsxs)("span",{className:"text-xs uppercase tracking-wider text-gray-400 font-medium",children:[c?.articles?.count||0," ",e.profile.items]}),(0,t.jsx)("button",{onClick:()=>N("articles",e.profile.dataManagement.articles),className:"text-gray-300 hover:text-red-500 transition-colors p-2 -mr-2","aria-label":`删除${e.profile.dataManagement.articles}`,children:(0,t.jsx)(n.Trash2,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"group flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-light tracking-tight",children:e.profile.dataManagement.chats}),(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsxs)("span",{className:"text-xs uppercase tracking-wider text-gray-400 font-medium",children:[c?.chats?.count||0," ",e.profile.dataManagement.threads]}),(0,t.jsx)("button",{onClick:()=>N("chats",e.profile.dataManagement.chats),className:"text-gray-300 hover:text-red-500 transition-colors p-2 -mr-2","aria-label":`删除${e.profile.dataManagement.chats}`,children:(0,t.jsx)(n.Trash2,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"group flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-light tracking-tight",children:e.profile.dataManagement.insights}),(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsx)("span",{className:"text-xs uppercase tracking-wider text-gray-400 font-medium",children:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]})(c?.insights?.size||0)}),(0,t.jsx)("button",{onClick:()=>N("insights",e.profile.dataManagement.insights),className:"text-gray-300 hover:text-red-500 transition-colors p-2 -mr-2","aria-label":`删除${e.profile.dataManagement.insights}`,children:(0,t.jsx)(n.Trash2,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"group flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-light tracking-tight",children:e.profile.dataManagement.library}),(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsxs)("span",{className:"text-xs uppercase tracking-wider text-gray-400 font-medium",children:[c?.library?.count||0," ",e.profile.items]}),(0,t.jsx)("button",{onClick:()=>N("library",e.profile.dataManagement.library),className:"text-gray-300 hover:text-red-500 transition-colors p-2 -mr-2","aria-label":`删除${e.profile.dataManagement.library}`,children:(0,t.jsx)(n.Trash2,{className:"w-5 h-5"})})]})]})]}),(0,t.jsx)(y,{onSuccess:async()=>{let e=await s();e.success&&e.data&&d(e.data)}}),(0,t.jsx)("div",{className:"mt-16 border-t border-dashed border-gray-200 dark:border-zinc-800 pt-6",children:(0,t.jsx)("p",{className:"text-[11px] text-gray-400 leading-relaxed font-light",children:e.profile.dataManagement.note})})]}),(0,t.jsx)(f,{open:v.open,onOpenChange:e=>x({...v,open:e}),category:v.label,onConfirm:w,loading:b,i18n:{confirmTitle:e.profile.dataManagement.confirmTitle,confirmDesc:e.profile.dataManagement.confirmDesc,deleteWarning:e.profile.dataManagement.deleteWarning,confirmButton:e.profile.dataManagement.confirmButton,cancelButton:e.profile.dataManagement.cancelButton}}),(0,t.jsx)(m.Toaster,{})]})}e.s(["default",()=>v],88202)},32048,e=>{e.v(t=>Promise.all(["static/chunks/c6d438b74da58b86.js"].map(t=>e.l(t))).then(()=>t(86208)))}]);